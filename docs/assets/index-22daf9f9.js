import{r as Y,a as sa,L as oa,g as ia,c as Se,R as se,b as aa,O as ca,N as la,B as ua,d as da,e as Lt}from"./react-31849db6.js";import{t as ha,c as fa,a as pa,$ as ga,b as qs,d as Ks,e as va,f as Hs,g as Gs,h as Js,i as Zs,j as Ys,k as Xs,l as Qs,m as _a,n as ma}from"./ui-3209bd4e.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var eo={exports:{}},wn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ya=Y,ba=Symbol.for("react.element"),wa=Symbol.for("react.fragment"),Sa=Object.prototype.hasOwnProperty,Ra=ya.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ta={key:!0,ref:!0,__self:!0,__source:!0};function to(n,e,t){var r,s={},o=null,i=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)Sa.call(e,r)&&!Ta.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:ba,type:n,key:o,ref:i,props:s,_owner:Ra.current}}wn.Fragment=wa;wn.jsx=to;wn.jsxs=to;eo.exports=wn;var A=eo.exports,dr={},ss=sa;dr.createRoot=ss.createRoot,dr.hydrateRoot=ss.hydrateRoot;const Ea="modulepreload",ka=function(n){return"/project-noah/"+n},os={},je=function(e,t,r){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(o=>{if(o=ka(o),o in os)return;os[o]=!0;const i=o.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(!!r)for(let u=s.length-1;u>=0;u--){const d=s[u];if(d.href===o&&(!i||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const l=document.createElement("link");if(l.rel=i?"stylesheet":Ea,i||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),i)return new Promise((u,d)=>{l.addEventListener("load",u),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})};var Aa={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const $a=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ce=(n,e)=>{const t=Y.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:i,children:a,...c},l)=>Y.createElement("svg",{ref:l,...Aa,width:s,height:s,stroke:r,strokeWidth:i?Number(o)*24/Number(s):o,className:`lucide lucide-${$a(n)}`,...c},[...e.map(([u,d])=>Y.createElement(u,d)),...(Array.isArray(a)?a:[a])||[]]));return t.displayName=`${n}`,t},Ca=Ce("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Na=Ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),La=Ce("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),xa=Ce("Component",[["path",{d:"M5.5 8.5 9 12l-3.5 3.5L2 12l3.5-3.5Z",key:"1kciei"}],["path",{d:"m12 2 3.5 3.5L12 9 8.5 5.5 12 2Z",key:"1ome0g"}],["path",{d:"M18.5 8.5 22 12l-3.5 3.5L15 12l3.5-3.5Z",key:"vbupec"}],["path",{d:"m12 15 3.5 3.5L12 22l-3.5-3.5L12 15Z",key:"16csic"}]]),Pa=Ce("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Oa=Ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ia=Ce("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),ja=Ce("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Ua=Ce("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Da=Ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Ma=({title:n,icon:e,redirect:t})=>{const r=e;return A.jsxs(oa,{to:t,className:"flex items-center justify-center gap-2",children:[A.jsx(r,{size:20}),A.jsx("span",{children:n})]})},Va=[{title:"Home",icon:Pa,redirect:"/"},{title:"Style Guide",icon:ja,redirect:"/design-tokens"},{title:"Components",icon:xa,redirect:"/button-demo"}],Ba=()=>A.jsx("ul",{className:"flex items-center justify-between gap-4",children:Va.map((n,e)=>A.jsx(Ma,{...n},e))});function Ue(...n){return ha(fa(n))}const Fa=pa("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),xr=Y.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},o)=>{const i=r?ga:"button";return A.jsx(i,{className:Ue(Fa({variant:e,size:t,className:n})),ref:o,...s})});xr.displayName="Button";const za=_a,Wa=ma,qa=Y.forwardRef(({className:n,inset:e,children:t,...r},s)=>A.jsxs(qs,{ref:s,className:Ue("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",n),...r,children:[t,A.jsx(Na,{className:"ml-auto h-4 w-4"})]}));qa.displayName=qs.displayName;const Ka=Y.forwardRef(({className:n,...e},t)=>A.jsx(Ks,{ref:t,className:Ue("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));Ka.displayName=Ks.displayName;const no=Y.forwardRef(({className:n,sideOffset:e=4,...t},r)=>A.jsx(va,{children:A.jsx(Hs,{ref:r,sideOffset:e,className:Ue("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));no.displayName=Hs.displayName;const fn=Y.forwardRef(({className:n,inset:e,...t},r)=>A.jsx(Gs,{ref:r,className:Ue("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",n),...t}));fn.displayName=Gs.displayName;const Ha=Y.forwardRef(({className:n,children:e,checked:t,...r},s)=>A.jsxs(Js,{ref:s,className:Ue("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[A.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:A.jsx(Zs,{children:A.jsx(Ca,{className:"h-4 w-4"})})}),e]}));Ha.displayName=Js.displayName;const Ga=Y.forwardRef(({className:n,children:e,...t},r)=>A.jsxs(Ys,{ref:r,className:Ue("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[A.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:A.jsx(Zs,{children:A.jsx(La,{className:"h-2 w-2 fill-current"})})}),e]}));Ga.displayName=Ys.displayName;const Ja=Y.forwardRef(({className:n,inset:e,...t},r)=>A.jsx(Xs,{ref:r,className:Ue("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));Ja.displayName=Xs.displayName;const Za=Y.forwardRef(({className:n,...e},t)=>A.jsx(Qs,{ref:t,className:Ue("-mx-1 my-1 h-px bg-muted",n),...e}));Za.displayName=Qs.displayName;const Ya={theme:"system",setTheme:()=>null},ro=Y.createContext(Ya);function Xa({children:n,defaultTheme:e="system",storageKey:t="vite-ui-theme",...r}){const[s,o]=Y.useState(()=>localStorage.getItem(t)||e);Y.useEffect(()=>{const a=window.document.documentElement;if(a.classList.remove("light","dark"),s==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";a.classList.add(c);return}a.classList.add(s)},[s]);const i={theme:s,setTheme:a=>{localStorage.setItem(t,a),o(a)}};return A.jsx(ro.Provider,{...r,value:i,children:n})}const Qa=()=>{const n=Y.useContext(ro);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n};function ec(){const{setTheme:n}=Qa();return A.jsxs(za,{children:[A.jsx(Wa,{asChild:!0,children:A.jsxs(xr,{variant:"outline",size:"icon",children:[A.jsx(Ua,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),A.jsx(Ia,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),A.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),A.jsxs(no,{align:"end",children:[A.jsx(fn,{onClick:()=>n("light"),children:"Light"}),A.jsx(fn,{onClick:()=>n("dark"),children:"Dark"}),A.jsx(fn,{onClick:()=>n("system"),children:"System"})]})]})}const tc=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>je(()=>Promise.resolve().then(()=>Et),void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Pr extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class nc extends Pr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class is extends Pr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class as extends Pr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var hr;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(hr||(hr={}));var rc=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{l(r.next(u))}catch(d){i(d)}}function c(u){try{l(r.throw(u))}catch(d){i(d)}}function l(u){u.done?o(u.value):s(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class sc{constructor(e,{headers:t={},customFetch:r,region:s=hr.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=tc(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return rc(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:i}=t;let a={},{region:c}=t;c||(c=this.region);const l=new URL(`${this.url}/${e}`);c&&c!=="any"&&(a["x-region"]=c,l.searchParams.set("forceFunctionRegion",c));let u;i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=i):typeof i=="string"?(a["Content-Type"]="text/plain",u=i):typeof FormData<"u"&&i instanceof FormData?u=i:(a["Content-Type"]="application/json",u=JSON.stringify(i)));const d=yield this.fetch(l.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(b=>{throw new nc(b)}),g=d.headers.get("x-relay-error");if(g&&g==="true")throw new is(d);if(!d.ok)throw new as(d);let _=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),v;return _==="application/json"?v=yield d.json():_==="application/octet-stream"?v=yield d.blob():_==="text/event-stream"?v=d:_==="multipart/form-data"?v=yield d.formData():v=yield d.text(),{data:v,error:null,response:d}}catch(s){return{data:null,error:s,response:s instanceof as||s instanceof is?s.context:void 0}}})}}var ge={},Or={},Sn={},Ht={},Rn={},Tn={},oc=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},yt=oc();const ic=yt.fetch,so=yt.fetch.bind(yt),oo=yt.Headers,ac=yt.Request,cc=yt.Response,Et=Object.freeze(Object.defineProperty({__proto__:null,Headers:oo,Request:ac,Response:cc,default:so,fetch:ic},Symbol.toStringTag,{value:"Module"})),lc=ia(Et);var En={};Object.defineProperty(En,"__esModule",{value:!0});let uc=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};En.default=uc;var io=Se&&Se.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Tn,"__esModule",{value:!0});const dc=io(lc),hc=io(En);let fc=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=dc.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var i,a,c,l;let u=null,d=null,g=null,_=o.status,v=o.statusText;if(o.ok){if(this.method!=="HEAD"){const w=await o.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((i=this.headers.get("Accept"))===null||i===void 0)&&i.includes("application/vnd.pgrst.plan+text"))?d=w:d=JSON.parse(w))}const R=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),C=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");R&&C&&C.length>1&&(g=parseInt(C[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,g=null,_=406,v="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const R=await o.text();try{u=JSON.parse(R),Array.isArray(u)&&o.status===404&&(d=[],u=null,_=200,v="OK")}catch{o.status===404&&R===""?(_=204,v="No Content"):u={message:R}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,_=200,v="OK"),u&&this.shouldThrowOnError)throw new hc.default(u)}return{error:u,data:d,count:g,status:_,statusText:v}});return this.shouldThrowOnError||(s=s.catch(o=>{var i,a,c;return{error:{message:`${(i=o==null?void 0:o.name)!==null&&i!==void 0?i:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(a=o==null?void 0:o.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};Tn.default=fc;var pc=Se&&Se.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Rn,"__esModule",{value:!0});const gc=pc(Tn);let vc=class extends gc.default{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:o=s}={}){const i=o?`${o}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const o=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:o=!1,format:i="text"}={}){var a;const c=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${c};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Rn.default=vc;var _c=Se&&Se.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ht,"__esModule",{value:!0});const mc=_c(Rn);let yc=class extends mc.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${o}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};Ht.default=yc;var bc=Se&&Se.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Sn,"__esModule",{value:!0});const xt=bc(Ht);let wc=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){const s=t?"HEAD":"GET";let o=!1;const i=(e??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",i),r&&this.headers.append("Prefer",`count=${r}`),new xt.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;const o="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(i.length>0){const a=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new xt.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:o=!0}={}){var i;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new xt.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const s="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new xt.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new xt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};Sn.default=wc;var ao=Se&&Se.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Or,"__esModule",{value:!0});const Sc=ao(Sn),Rc=ao(Ht);let Tc=class co{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new Sc.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new co(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:o}={}){var i;let a;const c=new URL(`${this.url}/rpc/${e}`);let l;r||s?(a=r?"HEAD":"GET",Object.entries(t).filter(([d,g])=>g!==void 0).map(([d,g])=>[d,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([d,g])=>{c.searchParams.append(d,g)})):(a="POST",l=t);const u=new Headers(this.headers);return o&&u.set("Prefer",`count=${o}`),new Rc.default({method:a,url:c,headers:u,schema:this.schemaName,body:l,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};Or.default=Tc;var kt=Se&&Se.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ge,"__esModule",{value:!0});ge.PostgrestError=ge.PostgrestBuilder=ge.PostgrestTransformBuilder=ge.PostgrestFilterBuilder=ge.PostgrestQueryBuilder=ge.PostgrestClient=void 0;const lo=kt(Or);ge.PostgrestClient=lo.default;const uo=kt(Sn);ge.PostgrestQueryBuilder=uo.default;const ho=kt(Ht);ge.PostgrestFilterBuilder=ho.default;const fo=kt(Rn);ge.PostgrestTransformBuilder=fo.default;const po=kt(Tn);ge.PostgrestBuilder=po.default;const go=kt(En);ge.PostgrestError=go.default;var Ec=ge.default={PostgrestClient:lo.default,PostgrestQueryBuilder:uo.default,PostgrestFilterBuilder:ho.default,PostgrestTransformBuilder:fo.default,PostgrestBuilder:po.default,PostgrestError:go.default};const{PostgrestClient:kc,PostgrestQueryBuilder:k_,PostgrestFilterBuilder:A_,PostgrestTransformBuilder:$_,PostgrestBuilder:C_,PostgrestError:N_}=Ec;class Ac{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const $c="2.15.1",Cc=`realtime-js/${$c}`,Nc="1.0.0",fr=1e4,Lc=1e3,xc=100;var Vt;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Vt||(Vt={}));var ae;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(ae||(ae={}));var Ae;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ae||(Ae={}));var pr;(function(n){n.websocket="websocket"})(pr||(pr={}));var Xe;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Xe||(Xe={}));class Pc{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),o=t.getUint8(2);let i=this.HEADER_LENGTH+2;const a=r.decode(e.slice(i,i+s));i=i+s;const c=r.decode(e.slice(i,i+o));i=i+o;const l=JSON.parse(r.decode(e.slice(i,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class vo{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Q;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Q||(Q={}));const cs=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,i)=>(o[i]=Oc(i,n,e,s),o),{})},Oc=(n,e,t,r)=>{const s=e.find(a=>a.name===n),o=s==null?void 0:s.type,i=t[n];return o&&!r.includes(o)?_o(o,i):gr(i)},_o=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Dc(e,t)}switch(n){case Q.bool:return Ic(e);case Q.float4:case Q.float8:case Q.int2:case Q.int4:case Q.int8:case Q.numeric:case Q.oid:return jc(e);case Q.json:case Q.jsonb:return Uc(e);case Q.timestamp:return Mc(e);case Q.abstime:case Q.date:case Q.daterange:case Q.int4range:case Q.int8range:case Q.money:case Q.reltime:case Q.text:case Q.time:case Q.timestamptz:case Q.timetz:case Q.tsrange:case Q.tstzrange:return gr(e);default:return gr(e)}},gr=n=>n,Ic=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},jc=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},Uc=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Dc=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let o;const i=n.slice(1,t);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(a=>_o(e,a))}return n},Mc=n=>typeof n=="string"?n.replace(" ","T"):n,mo=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Zn{constructor(e,t,r={},s=fr){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ls;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(ls||(ls={}));class Bt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bt.syncState(this.state,s,o,i),this.pendingDiffs.forEach(c=>{this.state=Bt.syncDiff(this.state,c,o,i)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:i,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Bt.syncDiff(this.state,s,o,i),a())}),this.onJoin((s,o,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:i})}),this.onLeave((s,o,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const o=this.cloneDeep(e),i=this.transformState(t),a={},c={};return this.map(o,(l,u)=>{i[l]||(c[l]=u)}),this.map(i,(l,u)=>{const d=o[l];if(d){const g=u.map(R=>R.presence_ref),_=d.map(R=>R.presence_ref),v=u.filter(R=>_.indexOf(R.presence_ref)<0),b=d.filter(R=>g.indexOf(R.presence_ref)<0);v.length>0&&(a[l]=v),b.length>0&&(c[l]=b)}else a[l]=u}),this.syncDiff(o,{joins:a,leaves:c},r,s)}static syncDiff(e,t,r,s){const{joins:o,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const d=e[a].map(_=>_.presence_ref),g=u.filter(_=>d.indexOf(_.presence_ref)<0);e[a].unshift(...g)}r(a,u,c)}),this.map(i,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=l,s(a,l,c),l.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var us;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(us||(us={}));var Ft;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Ft||(Ft={}));var Ie;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Ie||(Ie={}));class Ir{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=ae.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Zn(this,Ae.join,this.params,this.timeout),this.rejoinTimer=new vo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ae.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ae.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ae.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ae.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ae.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ae.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Bt(this),this.broadcastEndpointURL=mo(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ae.closed){const{config:{broadcast:o,presence:i,private:a}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],l=!!this.bindings[Ft.PRESENCE]&&this.bindings[Ft.PRESENCE].length>0,u={},d={broadcast:o,presence:Object.assign(Object.assign({},i),{enabled:l}),postgres_changes:c,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(Ie.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(Ie.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:g})=>{var _;if(this.socket.setAuth(),g===void 0){e==null||e(Ie.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(_=v==null?void 0:v.length)!==null&&_!==void 0?_:0,R=[];for(let C=0;C<b;C++){const w=v[C],{filter:{event:m,schema:L,table:F,filter:P}}=w,U=g&&g[C];if(U&&U.event===m&&U.schema===L&&U.table===F&&U.filter===P)R.push(Object.assign(Object.assign({},w),{id:U.id}));else{this.unsubscribe(),this.state=ae.errored,e==null||e(Ie.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,e&&e(Ie.SUBSCRIBED);return}}).receive("error",g=>{this.state=ae.errored,e==null||e(Ie.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ie.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===ae.joined&&e===Ft.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,a,c;const l=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(i=this.params)===null||i===void 0?void 0:i.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),l.receive("ok",()=>o("ok")),l.receive("error",()=>o("error")),l.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ae.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ae.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Zn(this,Ae.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ae.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(o),i}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Zn(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>xc){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,o;const i=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=Ae;if(r&&[a,c,l,u].indexOf(i)>=0&&r!==this._joinRef())return;let g=this._onMessage(i,t,r);if(t&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(_=>{var v,b,R;return((v=_.filter)===null||v===void 0?void 0:v.event)==="*"||((R=(b=_.filter)===null||b===void 0?void 0:b.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===i}).map(_=>_.callback(g,r)):(o=this.bindings[i])===null||o===void 0||o.filter(_=>{var v,b,R,C,w,m;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in _){const L=_.id,F=(v=_.filter)===null||v===void 0?void 0:v.event;return L&&((b=t.ids)===null||b===void 0?void 0:b.includes(L))&&(F==="*"||(F==null?void 0:F.toLocaleLowerCase())===((R=t.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const L=(w=(C=_==null?void 0:_.filter)===null||C===void 0?void 0:C.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return L==="*"||L===((m=t==null?void 0:t.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===i}).map(_=>{if(typeof g=="object"&&"ids"in g){const v=g.data,{schema:b,table:R,commit_timestamp:C,type:w,errors:m}=v;g=Object.assign(Object.assign({},{schema:b,table:R,commit_timestamp:C,eventType:w,new:{},old:{},errors:m}),this._getPayloadRecords(v))}_.callback(g,r)})}_isClosed(){return this.state===ae.closed}_isJoined(){return this.state===ae.joined}_isJoining(){return this.state===ae.joining}_isLeaving(){return this.state===ae.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),o={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Ir.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ae.close,{},e)}_onError(e){this._on(Ae.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ae.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=cs(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=cs(e.columns,e.old_record)),t}}const ds=()=>{},rn={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Vc=[1e3,2e3,5e3,1e4],Bc=1e4,Fc=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class zc{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=fr,this.transport=null,this.heartbeatIntervalMs=rn.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ds,this.ref=0,this.reconnectTimer=null,this.logger=ds,this.conn=null,this.sendBuffer=[],this.serializer=new Pc,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...i)=>je(()=>Promise.resolve().then(()=>Et),void 0).then(({default:a})=>a(...i)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...i)=>o(...i)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${pr.websocket}`,this.httpEndpoint=mo(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ac.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Nc}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Vt.connecting:return Xe.Connecting;case Vt.open:return Xe.Open;case Vt.closing:return Xe.Closing;default:return Xe.Closed}}isConnected(){return this.connectionState()===Xe.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===r);if(s)return s;{const o=new Ir(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:r,payload:s,ref:o}=e,i=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${t} ${r} (${o})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Lc,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},rn.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:o,ref:i}=t,a=i?`(${i})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${s} ${a}`.trim(),o),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(s,o,i)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ae.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([Fc],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const s={access_token:t,version:Cc};t&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Ae.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new vo(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},rn.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,o,i,a,c,l;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:fr,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:rn.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(i=e==null?void 0:e.accessToken)!==null&&i!==void 0?i:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=e==null?void 0:e.reconnectAfterMs)!==null&&a!==void 0?a:u=>Vc[u-1]||Bc,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(u,d)=>d(JSON.stringify(u)),this.decode=(l=e==null?void 0:e.decode)!==null&&l!==void 0?l:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class jr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ce(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Wc extends jr{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vr extends jr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var qc=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{l(r.next(u))}catch(d){i(d)}}function c(u){try{l(r.throw(u))}catch(d){i(d)}}function l(u){u.done?o(u.value):s(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const yo=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>je(()=>Promise.resolve().then(()=>Et),void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Kc=()=>qc(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield je(()=>Promise.resolve().then(()=>Et),void 0)).Response:Response}),_r=n=>{if(Array.isArray(n))return n.map(t=>_r(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=_r(r)}),e},Hc=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var nt=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{l(r.next(u))}catch(d){i(d)}}function c(u){try{l(r.throw(u))}catch(d){i(d)}}function l(u){u.done?o(u.value):s(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const Yn=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Gc=(n,e,t)=>nt(void 0,void 0,void 0,function*(){const r=yield Kc();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{const o=n.status||500,i=(s==null?void 0:s.statusCode)||o+"";e(new Wc(Yn(s),o,i))}).catch(s=>{e(new vr(Yn(s),s))}):e(new vr(Yn(n),n))}),Jc=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?s:(Hc(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),t))};function Gt(n,e,t,r,s,o){return nt(this,void 0,void 0,function*(){return new Promise((i,a)=>{n(t,Jc(e,r,s,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>Gc(c,a,r))})})}function gn(n,e,t,r){return nt(this,void 0,void 0,function*(){return Gt(n,"GET",e,t,r)})}function $e(n,e,t,r,s){return nt(this,void 0,void 0,function*(){return Gt(n,"POST",e,r,s,t)})}function mr(n,e,t,r,s){return nt(this,void 0,void 0,function*(){return Gt(n,"PUT",e,r,s,t)})}function Zc(n,e,t,r){return nt(this,void 0,void 0,function*(){return Gt(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function bo(n,e,t,r,s){return nt(this,void 0,void 0,function*(){return Gt(n,"DELETE",e,r,s,t)})}var he=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{l(r.next(u))}catch(d){i(d)}}function c(u){try{l(r.throw(u))}catch(d){i(d)}}function l(u){u.done?o(u.value):s(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const Yc={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hs={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Xc{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=yo(s)}uploadOrUpdate(e,t,r,s){return he(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},hs),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",i.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,a["cache-control"]=`max-age=${i.cacheControl}`,a["content-type"]=i.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),d=yield(e=="PUT"?mr:$e)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:a},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(ce(o))return{data:null,error:o};throw o}})}upload(e,t,r){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return he(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),i=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${i}`);a.searchParams.set("token",t);try{let c;const l=Object.assign({upsert:hs.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const d=yield mr(this.fetch,a.toString(),c,{headers:u});return{data:{path:o,fullPath:d.Key},error:null}}catch(c){if(ce(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return he(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const o=yield $e(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),i=new URL(this.url+o.url),a=i.searchParams.get("token");if(!a)throw new jr("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:a},error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}update(e,t,r){return he(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return he(this,void 0,void 0,function*(){try{return{data:yield $e(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}})}copy(e,t,r){return he(this,void 0,void 0,function*(){try{return{data:{path:(yield $e(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return he(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield $e(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return he(this,void 0,void 0,function*(){try{const s=yield $e(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}})}download(e,t){return he(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=o?`?${o}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield gn(this.fetch,`${this.url}/${s}/${a}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(ce(a))return{data:null,error:a};throw a}})}info(e){return he(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield gn(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:_r(r),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}exists(e){return he(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Zc(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ce(r)&&r instanceof vr){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],o=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&s.push(o);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(e){return he(this,void 0,void 0,function*(){try{return{data:yield bo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ce(t))return{data:null,error:t};throw t}})}list(e,t,r){return he(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Yc),t),{prefix:e||""});return{data:yield $e(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}})}listV2(e,t){return he(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield $e(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Qc="2.11.0",el={"X-Client-Info":`storage-js/${Qc}`};var ut=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{l(r.next(u))}catch(d){i(d)}}function c(u){try{l(r.throw(u))}catch(d){i(d)}}function l(u){u.done?o(u.value):s(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class tl{constructor(e,t={},r,s){const o=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},el),t),this.fetch=yo(r)}listBuckets(){return ut(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ce(e))return{data:null,error:e};throw e}})}getBucket(e){return ut(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ce(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return ut(this,void 0,void 0,function*(){try{return{data:yield $e(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return ut(this,void 0,void 0,function*(){try{return{data:yield mr(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ut(this,void 0,void 0,function*(){try{return{data:yield $e(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ce(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ut(this,void 0,void 0,function*(){try{return{data:yield bo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ce(t))return{data:null,error:t};throw t}})}}class nl extends tl{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new Xc(this.url,this.headers,e,this.fetch)}}const rl="2.56.0";let Dt="";typeof Deno<"u"?Dt="deno":typeof document<"u"?Dt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Dt="react-native":Dt="node";const sl={"X-Client-Info":`supabase-js-${Dt}/${rl}`},ol={headers:sl},il={schema:"public"},al={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cl={};var ll=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{l(r.next(u))}catch(d){i(d)}}function c(u){try{l(r.throw(u))}catch(d){i(d)}}function l(u){u.done?o(u.value):s(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};const ul=n=>{let e;return n?e=n:typeof fetch>"u"?e=so:e=fetch,(...t)=>e(...t)},dl=()=>typeof Headers>"u"?oo:Headers,hl=(n,e,t)=>{const r=ul(t),s=dl();return(o,i)=>ll(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:n;let l=new s(i==null?void 0:i.headers);return l.has("apikey")||l.set("apikey",n),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},i),{headers:l}))})};var fl=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{l(r.next(u))}catch(d){i(d)}}function c(u){try{l(r.throw(u))}catch(d){i(d)}}function l(u){u.done?o(u.value):s(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};function pl(n){return n.endsWith("/")?n:n+"/"}function gl(n,e){var t,r;const{db:s,auth:o,realtime:i,global:a}=n,{db:c,auth:l,realtime:u,global:d}=e,g={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},l),o),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(t=d==null?void 0:d.headers)!==null&&t!==void 0?t:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>fl(this,void 0,void 0,function*(){return""})};return n.accessToken?g.accessToken=n.accessToken:delete g.accessToken,g}const wo="2.71.1",vt=30*1e3,yr=3,Xn=yr*vt,vl="http://localhost:9999",_l="supabase.auth.token",ml={"X-Client-Info":`gotrue-js/${wo}`},br="X-Supabase-Api-Version",So={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yl=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,bl=10*60*1e3;class Ur extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function M(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class wl extends Ur{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function Sl(n){return M(n)&&n.name==="AuthApiError"}class Ro extends Ur{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ze extends Ur{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class Ve extends ze{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Rl(n){return M(n)&&n.name==="AuthSessionMissingError"}class sn extends ze{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class on extends ze{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class an extends ze{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Tl(n){return M(n)&&n.name==="AuthImplicitGrantRedirectError"}class fs extends ze{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class wr extends ze{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Qn(n){return M(n)&&n.name==="AuthRetryableFetchError"}class ps extends ze{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Sr extends ze{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const vn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gs=` 	
\r=`.split(""),El=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<gs.length;e+=1)n[gs[e].charCodeAt(0)]=-2;for(let e=0;e<vn.length;e+=1)n[vn[e].charCodeAt(0)]=e;return n})();function vs(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(vn[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(vn[r]),e.queuedBits-=6}}function To(n,e,t){const r=El[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function _s(n){const e=[],t=i=>{e.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=i=>{$l(i,r,t)};for(let i=0;i<n.length;i+=1)To(n.charCodeAt(i),s,o);return e.join("")}function kl(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Al(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}kl(r,e)}}function $l(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Cl(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)To(n.charCodeAt(s),t,r);return new Uint8Array(e)}function Nl(n){const e=[];return Al(n,t=>e.push(t)),new Uint8Array(e)}function Ll(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};return n.forEach(s=>vs(s,t,r)),vs(null,t,r),e.join("")}function xl(n){return Math.round(Date.now()/1e3)+n}function Pl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Ee=()=>typeof window<"u"&&typeof document<"u",Ge={tested:!1,writable:!1},Eo=()=>{if(!Ee())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ge.tested)return Ge.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ge.tested=!0,Ge.writable=!0}catch{Ge.tested=!0,Ge.writable=!1}return Ge.writable};function Ol(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const ko=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>je(()=>Promise.resolve().then(()=>Et),void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Il=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",_t=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Je=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Me=async(n,e)=>{await n.removeItem(e)};class kn{constructor(){this.promise=new kn.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}kn.promiseConstructor=Promise;function er(n){const e=n.split(".");if(e.length!==3)throw new Sr("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!yl.test(e[r]))throw new Sr("JWT not in base64url format");return{header:JSON.parse(_s(e[0])),payload:JSON.parse(_s(e[1])),signature:Cl(e[2]),raw:{header:e[0],payload:e[1]}}}async function jl(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function Ul(n,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await n(o);if(!e(o,null,i)){r(i);return}}catch(i){if(!e(o,i)){s(i);return}}})()})}function Dl(n){return("0"+n.toString(16)).substr(-2)}function Ml(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let o=0;o<56;o++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,Dl).join("")}async function Vl(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function Bl(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await Vl(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function dt(n,e,t=!1){const r=Ml();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await _t(n,`${e}-code-verifier`,s);const o=await Bl(r);return[o,r===o?"plain":"s256"]}const Fl=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function zl(n){const e=n.headers.get(br);if(!e||!e.match(Fl))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Wl(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function ql(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Kl=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ht(n){if(!Kl.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function tr(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ms(n){return JSON.parse(JSON.stringify(n))}var Hl=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const Ye=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Gl=[502,503,504];async function ys(n){var e;if(!Il(n))throw new wr(Ye(n),0);if(Gl.includes(n.status))throw new wr(Ye(n),n.status);let t;try{t=await n.json()}catch(o){throw new Ro(Ye(o),o)}let r;const s=zl(n);if(s&&s.getTime()>=So["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new ps(Ye(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ve}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new ps(Ye(t),n.status,t.weak_password.reasons);throw new wl(Ye(t),n.status||500,r)}const Jl=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function q(n,e,t,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[br]||(o[br]=So["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const i=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await Zl(n,e,t+a,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Zl(n,e,t,r,s,o){const i=Jl(e,r,s,o);let a;try{a=await n(t,Object.assign({},i))}catch(c){throw console.error(c),new wr(Ye(c),0)}if(a.ok||await ys(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(c){await ys(c)}}function Oe(n){var e;let t=null;eu(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=xl(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function bs(n){const e=Oe(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Fe(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Yl(n){return{data:n,error:null}}function Xl(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:o}=n,i=Hl(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:o},c=Object.assign({},i);return{data:{properties:a,user:c},error:null}}function Ql(n){return n}function eu(n){return n.access_token&&n.refresh_token&&n.expires_in}const nr=["global","local","others"];var tu=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class nu{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=ko(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=nr[0]){if(nr.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${nr.join(", ")}`);try{return await q(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await q(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Fe})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=tu(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Xl,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(M(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await q(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Fe})}catch(t){if(M(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,o,i,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:Ql});if(u.error)throw u.error;const d=await u.json(),g=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,_=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return _.length>0&&(_.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(v.split(";")[1].split("=")[1]);l[`${R}Page`]=b}),l.total=parseInt(g)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(M(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){ht(e);try{return await q(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Fe})}catch(t){if(M(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){ht(e);try{return await q(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Fe})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){ht(e);try{return await q(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Fe})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ht(e.userId);try{const{data:t,error:r}=await q(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(M(t))return{data:null,error:t};throw t}}async _deleteFactor(e){ht(e.userId),ht(e.id);try{return{data:await q(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(M(t))return{data:null,error:t};throw t}}}function ws(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function ru(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ft={debug:!!(globalThis&&Eo()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ao extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class su extends Ao{}async function ou(n,e,t){ft.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ft.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){ft.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{ft.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw ft.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new su(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(ft.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}ru();const iu={url:vl,storageKey:_l,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ml,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ss(n,e,t){return await t()}const pt={};class Kt{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Kt.nextInstanceID,Kt.nextInstanceID+=1,this.instanceID>0&&Ee()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},iu),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new nu({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=ko(s.fetch),this.lock=s.lock||Ss,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ee()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=ou:this.lock=Ss,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Eo()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ws(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=ws(this.memoryStorage)),Ee()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=pt[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){pt[this.storageKey]=Object.assign(Object.assign({},pt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=pt[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){pt[this.storageKey]=Object.assign(Object.assign({},pt[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${wo}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Ol(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Ee()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(t,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Tl(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:i,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",a),await this._saveSession(i),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return M(t)?{error:t}:{error:new Ro("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const o=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Oe}),{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const c=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(o){if(M(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,r,s;try{let o;if("email"in e){const{email:u,password:d,options:g}=e;let _=null,v=null;this.flowType==="pkce"&&([_,v]=await dt(this.storage,this.storageKey)),o=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:u,password:d,data:(t=g==null?void 0:g.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:_,code_challenge_method:v},xform:Oe})}else if("phone"in e){const{phone:u,password:d,options:g}=e;o=await q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(s=g==null?void 0:g.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Oe})}else throw new on("You must provide either an email or phone number and a password");const{data:i,error:a}=o;if(a||!i)return{data:{user:null,session:null},error:a};const c=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(o){if(M(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:i,options:a}=e;t=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:bs})}else if("phone"in e){const{phone:o,password:i,options:a}=e;t=await q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:bs})}else throw new on("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new sn}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(M(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,s,o,i,a,c,l,u,d,g,_;let v,b;if("message"in e)v=e.message,b=e.signature;else{const{chain:R,wallet:C,statement:w,options:m}=e;let L;if(Ee())if(typeof C=="object")L=C;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))L=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=C}const F=new URL((t=m==null?void 0:m.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in L&&L.signIn){const P=await L.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:F.host,uri:F.href}),w?{statement:w}:null));let U;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")U=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)U=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in U&&"signature"in U&&(typeof U.signedMessage=="string"||U.signedMessage instanceof Uint8Array)&&U.signature instanceof Uint8Array)v=typeof U.signedMessage=="string"?U.signedMessage:new TextDecoder().decode(U.signedMessage),b=U.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in L)||typeof L.signMessage!="function"||!("publicKey"in L)||typeof L!="object"||!L.publicKey||!("toBase58"in L.publicKey)||typeof L.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${F.host} wants you to sign in with your Solana account:`,L.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${F.href}`,`Issued At: ${(s=(r=m==null?void 0:m.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=m==null?void 0:m.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((a=m==null?void 0:m.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((d=(u=m==null?void 0:m.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...m.signInWithSolana.resources.map(U=>`- ${U}`)]:[]].join(`
`);const P=await L.signMessage(new TextEncoder().encode(v),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=P}}try{const{data:R,error:C}=await q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Ll(b)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Oe});if(C)throw C;return!R||!R.session||!R.user?{data:{user:null,session:null},error:new sn}:(R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),{data:Object.assign({},R),error:C})}catch(R){if(M(R))return{data:{user:null,session:null},error:R};throw R}}async _exchangeCodeForSession(e){const t=await Je(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:o,error:i}=await q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Oe});if(await Me(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new sn}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:i})}catch(o){if(M(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:o,nonce:i}=e,a=await q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Oe}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new sn}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(t){if(M(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,o,i;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await dt(this.storage,this.storageKey));const{error:d}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new on("You must provide either an email or phone number.")}catch(a){if(M(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let s,o;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:a}=await q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:Oe});if(a)throw a;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,l=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(s){if(M(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await dt(this.storage,this.storageKey)),await q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:Yl})}catch(o){if(M(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Ve;const{error:s}=await q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(M(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:i}=await q(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:i,error:a}=await q(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:a}}throw new on("You must provide either an email or phone number and a type")}catch(t){if(M(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Je(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Xn:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const i=await Je(this.userStorage,this.storageKey+"-user");i!=null&&i.user?e.user=i.user:e.user=tr()}if(this.storage.isServer&&e.user){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,u)=>(!i&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:e},error:null}}const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Fe}):await this._useSession(async t=>{var r,s,o;const{data:i,error:a}=t;if(a)throw a;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ve}:await q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Fe})})}catch(t){if(M(t))return Rl(t)&&(await this._removeSession(),await Me(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new Ve;const i=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await dt(this.storage,this.storageKey));const{data:l,error:u}=await q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:i.access_token,xform:Fe});if(u)throw u;return i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ve;const t=Date.now()/1e3;let r=t,s=!0,o=null;const{payload:i}=er(e.access_token);if(i.exp&&(r=i.exp,s=r<=t),s){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(M(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:i,error:a}=t;if(a)throw a;e=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ve;const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(M(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ee())throw new an("No browser detected.");if(e.error||e.error_description||e.error_code)throw new an(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new fs("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new an("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new fs("No code detected.");const{data:w,error:m}=await this._exchangeCodeForSession(e.code);if(m)throw m;const L=new URL(window.location.href);return L.searchParams.delete("code"),window.history.replaceState(window.history.state,"",L.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:i,expires_in:a,expires_at:c,token_type:l}=e;if(!o||!a||!i||!l)throw new an("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let g=u+d;c&&(g=parseInt(c));const _=g-u;_*1e3<=vt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${d}s`);const v=g-d;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,g,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,g,u);const{data:b,error:R}=await this._getUser(o);if(R)throw R;const C={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:d,expires_at:g,refresh_token:i,token_type:l,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:C,redirectType:e.type},error:null}}catch(r){if(M(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Je(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o)return{error:o};const i=(r=s.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:a}=await this.admin.signOut(i,e);if(a&&!(Sl(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Me(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Pl(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:o},error:i}=t;if(i)throw i;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await dt(this.storage,this.storageKey,!0));try{return await q(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(M(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(M(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async o=>{var i,a,c,l,u;const{data:d,error:g}=o;if(g)throw g;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await q(this.fetch,"GET",_,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Ee()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(M(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:o,error:i}=t;if(i)throw i;return await q(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(M(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await Ul(async s=>(s>0&&await jl(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Oe})),(s,o)=>{const i=200*Math.pow(2,s);return o&&Qn(o)&&Date.now()+i-r<vt})}catch(r){if(this._debug(t,"error",r),M(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Ee()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Je(this.storage,this.storageKey);if(s&&this.userStorage){let i=await Je(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await _t(this.userStorage,this.storageKey+"-user",i)),s.user=(e=i==null?void 0:i.user)!==null&&e!==void 0?e:tr()}else if(s&&!s.user&&!s.user){const i=await Je(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await Me(this.storage,this.storageKey+"-user"),await _t(this.storage,this.storageKey,s)):s.user=tr()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const o=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Xn;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Xn}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),Qn(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:a}=await this._getUser(s.access_token);!a&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Ve;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new kn;const{data:o,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!o.session)throw new Ve;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={session:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(s,"error",o),M(o)){const i={session:null,error:o};return Qn(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(c){o.push(c)}});if(await Promise.all(i),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await _t(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const o=ms(s);await _t(this.storage,this.storageKey,o)}else{const s=ms(t);await _t(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Me(this.storage,this.storageKey),await Me(this.storage,this.storageKey+"-code-verifier"),await Me(this.storage,this.storageKey+"-user"),this.userStorage&&await Me(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ee()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),vt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/vt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${vt}ms, refresh threshold is ${yr} ticks`),s<=yr&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ao)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ee()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,i]=await dt(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;return o?{data:null,error:o}:await q(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(M(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:o,error:i}=t;if(i)return{data:null,error:i};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=await q(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(M(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o)return{data:null,error:o};const{data:i,error:a}=await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:a})})}catch(t){if(M(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;return o?{data:null,error:o}:await q(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(M(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),o=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=er(s.access_token);let a=null;i.aal&&(a=i.aal);let c=a;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=i.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+bl>s)return r;const{data:o,error:i}=await q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,r=o.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:_,error:v}=await this.getSession();if(v||!_.session)return{data:null,error:v};r=_.session.access_token}const{header:s,payload:o,signature:i,raw:{header:a,payload:c}}=er(r);t!=null&&t.allowExpired||Wl(o.exp);const l=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!l){const{error:_}=await this.getUser(r);if(_)throw _;return{data:{claims:o,header:s,signature:i},error:null}}const u=ql(s.alg),d=await crypto.subtle.importKey("jwk",l,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,i,Nl(`${a}.${c}`)))throw new Sr("Invalid JWT signature");return{data:{claims:o,header:s,signature:i},error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}}Kt.nextInstanceID=0;const au=Kt;class cu extends au{constructor(e){super(e)}}var lu=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(i){i(o)})}return new(t||(t=Promise))(function(o,i){function a(u){try{l(r.next(u))}catch(d){i(d)}}function c(u){try{l(r.throw(u))}catch(d){i(d)}}function l(u){u.done?o(u.value):s(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};class uu{constructor(e,t,r){var s,o,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=pl(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:il,realtime:cl,auth:Object.assign(Object.assign({},al),{storageKey:l}),global:ol},d=gl(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=d.global.headers)!==null&&o!==void 0?o:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(g,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=d.auth)!==null&&i!==void 0?i:{},this.headers,d.global.fetch),this.fetch=hl(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new kc(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new nl(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new sc(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return lu(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:o,flowType:i,lock:a,debug:c},l,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new cu({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:i,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new zc(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const du=(n,e,t)=>new uu(n,e,t);function hu(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}hu()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const fu="https://pjugjcckydxkwgbuyhdv.supabase.co",pu="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBqdWdqY2NreWR4a3dnYnV5aGR2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5MTU3NDEsImV4cCI6MjA3MTQ5MTc0MX0.yctCfbwr70iEOP0FERVDon_jAkzf7SPzGtRbdsXX4Ms",Ze=du(fu,pu),$o=Y.createContext(void 0),Co=()=>{const n=Y.useContext($o);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},gu=({children:n})=>{const[e,t]=Y.useState(!1),[r,s]=Y.useState(null),[o,i]=Y.useState(!1),c="".split(",").map(b=>b.trim().toLowerCase()).filter(Boolean),l=c.length===0,u=b=>l||!!b&&c.includes(b.toLowerCase()),d=async(b,R)=>{try{if(!u(b))return!1;const{data:C,error:w}=await Ze.auth.signInWithPassword({email:b,password:R});if(w||!C.user)return!1;const m={id:C.user.id,email:C.user.email??b,name:(C.user.email??b).split("@")[0]};return s(m),t(!0),localStorage.setItem("auth",JSON.stringify({user:m,isAuthenticated:!0})),!0}catch(C){return console.error("Login failed:",C),!1}},g=async(b,R)=>{try{const{error:C}=await Ze.auth.signUp({email:b,password:R,options:{emailRedirectTo:`${window.location.origin}/auth`}});return C?{success:!1,message:C.message}:{success:!0,message:"Check your email to confirm your account."}}catch(C){return console.error("Signup failed:",C),{success:!1,message:"Signup failed"}}},_=()=>{Ze.auth.signOut().catch(()=>{}),s(null),t(!1),localStorage.removeItem("auth")};Y.useEffect(()=>{(async()=>{var C;try{const{data:w}=await Ze.auth.getSession(),m=((C=w.session)==null?void 0:C.user)??null;if(m&&u(m.email)){const L={id:m.id,email:m.email??"",name:(m.email??"").split("@")[0]};s(L),t(!0),localStorage.setItem("auth",JSON.stringify({user:L,isAuthenticated:!0}))}else await Ze.auth.signOut(),s(null),t(!1),localStorage.removeItem("auth")}catch(w){console.error("Auth initialization failed:",w),s(null),t(!1),localStorage.removeItem("auth")}finally{i(!0)}})();const{data:R}=Ze.auth.onAuthStateChange((C,w)=>{const m=(w==null?void 0:w.user)??null;if(m&&u(m.email)){const L={id:m.id,email:m.email??"",name:(m.email??"").split("@")[0]};s(L),t(!0),localStorage.setItem("auth",JSON.stringify({user:L,isAuthenticated:!0}))}else s(null),t(!1),localStorage.removeItem("auth")});return()=>{R.subscription.unsubscribe()}},[]);const v={isAuthenticated:e,login:d,signup:g,loginWithGoogle:async()=>{await Ze.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth`,queryParams:{access_type:"offline",prompt:"consent"}}})},logout:_,user:r,isInitialized:o};return A.jsx($o.Provider,{value:v,children:n})},vu=({children:n,className:e,...t})=>A.jsx("h4",{className:`scroll-m-20 text-xl font-semibold tracking-tight ${e}`,...t,children:n}),_u=()=>{const{isAuthenticated:n,user:e,logout:t}=Co(),r=()=>{t()};return A.jsxs("header",{className:"fixed top-0 overflow-hidden w-full flex items-center justify-between px-4 h-16 z-10 backdrop-blur bg-background/70 border-b border-border",children:[A.jsx(vu,{className:"text-foreground font-sarabun",children:"Project Noah"}),A.jsxs("div",{className:"flex items-center justify-center gap-4",children:[n&&A.jsx(Ba,{}),n&&e&&A.jsxs("div",{className:"flex items-center gap-2 text-sm font-sarabun text-muted-foreground",children:[A.jsx(Da,{className:"h-4 w-4 text-muted-foreground"}),A.jsx("span",{children:e.name})]}),n&&A.jsxs(xr,{variant:"outline",size:"sm",onClick:r,className:"flex items-center gap-2",children:[A.jsx(Oa,{className:"h-4 w-4"}),"Logout"]}),A.jsx(ec,{})]})]})};function mu(n){const e=new Error(n);if(e.stack===void 0)try{throw e}catch{}return e}var yu=mu,B=yu;function bu(n){return!!n&&typeof n.then=="function"}var ee=bu;function wu(n,e){if(n!=null)return n;throw B(e??"Got unexpected null or undefined")}var re=wu;function V(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class An{getValue(){throw B("BaseLoadable")}toPromise(){throw B("BaseLoadable")}valueMaybe(){throw B("BaseLoadable")}valueOrThrow(){throw B(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw B("BaseLoadable")}promiseOrThrow(){throw B(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw B("BaseLoadable")}errorOrThrow(){throw B(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw B("BaseLoadable")}}class Su extends An{constructor(e){super(),V(this,"state","hasValue"),V(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const t=e(this.contents);return ee(t)?et(t):bt(t)?t:Jt(t)}catch(t){return ee(t)?et(t.next(()=>this.map(e))):$n(t)}}}class Ru extends An{constructor(e){super(),V(this,"state","hasError"),V(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class No extends An{constructor(e){super(),V(this,"state","loading"),V(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return et(this.contents.then(t=>{const r=e(t);if(bt(r)){const s=r;switch(s.state){case"hasValue":return s.contents;case"hasError":throw s.contents;case"loading":return s.contents}}return r}).catch(t=>{if(ee(t))return t.then(()=>this.map(e).contents);throw t}))}}function Jt(n){return Object.freeze(new Su(n))}function $n(n){return Object.freeze(new Ru(n))}function et(n){return Object.freeze(new No(n))}function Lo(){return Object.freeze(new No(new Promise(()=>{})))}function Tu(n){return n.every(e=>e.state==="hasValue")?Jt(n.map(e=>e.contents)):n.some(e=>e.state==="hasError")?$n(re(n.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):et(Promise.all(n.map(e=>e.contents)))}function xo(n){const t=(Array.isArray(n)?n:Object.getOwnPropertyNames(n).map(s=>n[s])).map(s=>bt(s)?s:ee(s)?et(s):Jt(s)),r=Tu(t);return Array.isArray(n)?r:r.map(s=>Object.getOwnPropertyNames(n).reduce((o,i,a)=>({...o,[i]:s[a]}),{}))}function bt(n){return n instanceof An}const Eu={of:n=>ee(n)?et(n):bt(n)?n:Jt(n),error:n=>$n(n),loading:()=>Lo(),all:xo,isLoadable:bt};var rt={loadableWithValue:Jt,loadableWithError:$n,loadableWithPromise:et,loadableLoading:Lo,loadableAll:xo,isLoadable:bt,RecoilLoadable:Eu},ku=rt.loadableWithValue,Au=rt.loadableWithError,$u=rt.loadableWithPromise,Cu=rt.loadableLoading,Nu=rt.loadableAll,Lu=rt.isLoadable,xu=rt.RecoilLoadable,Zt=Object.freeze({__proto__:null,loadableWithValue:ku,loadableWithError:Au,loadableWithPromise:$u,loadableLoading:Cu,loadableAll:Nu,isLoadable:Lu,RecoilLoadable:xu});const Rr={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function Pu(n,e){var t,r;const s=(t=process.env[n])===null||t===void 0||(r=t.toLowerCase())===null||r===void 0?void 0:r.trim();if(s==null||s==="")return;if(!["true","false"].includes(s))throw B(`({}).${n} value must be 'true', 'false', or empty: ${s}`);e(s==="true")}function Ou(n,e){var t;const r=(t=process.env[n])===null||t===void 0?void 0:t.trim();r==null||r===""||e(r.split(/\s*,\s*|\s+/))}function Iu(){var n;typeof process>"u"||((n=process)===null||n===void 0?void 0:n.env)!=null&&(Pu("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",e=>{Rr.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=e}),Ou("RECOIL_GKS_ENABLED",e=>{e.forEach(t=>{Rr.RECOIL_GKS_ENABLED.add(t)})}))}Iu();var At=Rr;function Cn(n){return At.RECOIL_GKS_ENABLED.has(n)}Cn.setPass=n=>{At.RECOIL_GKS_ENABLED.add(n)};Cn.setFail=n=>{At.RECOIL_GKS_ENABLED.delete(n)};Cn.clear=()=>{At.RECOIL_GKS_ENABLED.clear()};var X=Cn;function ju(n,e,{error:t}={}){return null}var Uu=ju,Dr=Uu,rr,sr,or;const Du=(rr=se.createMutableSource)!==null&&rr!==void 0?rr:se.unstable_createMutableSource,Po=(sr=se.useMutableSource)!==null&&sr!==void 0?sr:se.unstable_useMutableSource,Oo=(or=se.useSyncExternalStore)!==null&&or!==void 0?or:se.unstable_useSyncExternalStore;function Mu(){var n;const{ReactCurrentDispatcher:e,ReactCurrentOwner:t}=se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((n=e==null?void 0:e.current)!==null&&n!==void 0?n:t.currentDispatcher).useSyncExternalStore!=null}function Vu(){return X("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:X("recoil_sync_external_store")&&Oo!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:X("recoil_mutable_source")&&Po!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?X("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:X("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function Bu(){return!1}var Yt={createMutableSource:Du,useMutableSource:Po,useSyncExternalStore:Oo,currentRendererSupportsUseSyncExternalStore:Mu,reactMode:Vu,isFastRefreshEnabled:Bu};class Mr{constructor(e){V(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class Io extends Mr{}class jo extends Mr{}function Fu(n){return n instanceof Io||n instanceof jo}var Nn={AbstractRecoilValue:Mr,RecoilState:Io,RecoilValueReadOnly:jo,isRecoilValue:Fu},zu=Nn.AbstractRecoilValue,Wu=Nn.RecoilState,qu=Nn.RecoilValueReadOnly,Ku=Nn.isRecoilValue,wt=Object.freeze({__proto__:null,AbstractRecoilValue:zu,RecoilState:Wu,RecoilValueReadOnly:qu,isRecoilValue:Ku});function Hu(n,e){return function*(){let t=0;for(const r of n)yield e(r,t++)}()}var Ln=Hu;class Uo{}const Gu=new Uo,tt=new Map,Vr=new Map;function Ju(n){return Ln(n,e=>re(Vr.get(e)))}function Zu(n){if(tt.has(n)){const e=`Duplicate atom key "${n}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(e)}}function Yu(n){At.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&Zu(n.key),tt.set(n.key,n);const e=n.set==null?new wt.RecoilValueReadOnly(n.key):new wt.RecoilState(n.key);return Vr.set(n.key,e),e}class Do extends Error{}function Xu(n){const e=tt.get(n);if(e==null)throw new Do(`Missing definition for RecoilValue: "${n}""`);return e}function Qu(n){return tt.get(n)}const _n=new Map;function ed(n){var e;if(!X("recoil_memory_managament_2020"))return;const t=tt.get(n);if(t!=null&&(e=t.shouldDeleteConfigOnRelease)!==null&&e!==void 0&&e.call(t)){var r;tt.delete(n),(r=Mo(n))===null||r===void 0||r(),_n.delete(n)}}function td(n,e){X("recoil_memory_managament_2020")&&(e===void 0?_n.delete(n):_n.set(n,e))}function Mo(n){return _n.get(n)}var _e={nodes:tt,recoilValues:Vr,registerNode:Yu,getNode:Xu,getNodeMaybe:Qu,deleteNodeConfigIfPossible:ed,setConfigDeletionHandler:td,getConfigDeletionHandler:Mo,recoilValuesForKeys:Ju,NodeMissingError:Do,DefaultValue:Uo,DEFAULT_VALUE:Gu};function nd(n,e){e()}var rd={enqueueExecution:nd};function sd(n,e){return e={exports:{}},n(e,e.exports),e.exports}var od=sd(function(n){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},t={},r=5,s=Math.pow(2,r),o=s-1,i=s/2,a=s/4,c={},l=function(h){return function(){return h}},u=t.hash=function(f){var h=typeof f>"u"?"undefined":e(f);if(h==="number")return f;h!=="string"&&(f+="");for(var y=0,E=0,k=f.length;E<k;++E){var $=f.charCodeAt(E);y=(y<<5)-y+$|0}return y},d=function(h){return h-=h>>1&1431655765,h=(h&858993459)+(h>>2&858993459),h=h+(h>>4)&252645135,h+=h>>8,h+=h>>16,h&127},g=function(h,y){return y>>>h&o},_=function(h){return 1<<h},v=function(h,y){return d(h&y-1)},b=function(h,y,E,k){var $=k;if(!h){var j=k.length;$=new Array(j);for(var O=0;O<j;++O)$[O]=k[O]}return $[y]=E,$},R=function(h,y,E){var k=E.length-1,$=0,j=0,O=E;if(h)$=j=y;else for(O=new Array(k);$<y;)O[j++]=E[$++];for(++$;$<=k;)O[j++]=E[$++];return h&&(O.length=k),O},C=function(h,y,E,k){var $=k.length;if(h){for(var j=$;j>=y;)k[j--]=k[j];return k[y]=E,k}for(var O=0,I=0,z=new Array($+1);O<y;)z[I++]=k[O++];for(z[y]=E;O<$;)z[++I]=k[O++];return z},w=1,m=2,L=3,F=4,P={__hamt_isEmpty:!0},U=function(h){return h===P||h&&h.__hamt_isEmpty},fe=function(h,y,E,k){return{type:w,edit:h,hash:y,key:E,value:k,_modify:at}},xe=function(h,y,E){return{type:m,edit:h,hash:y,children:E,_modify:ct}},J=function(h,y,E){return{type:L,edit:h,mask:y,children:E,_modify:H}},de=function(h,y,E){return{type:F,edit:h,size:y,children:E,_modify:G}},Ke=function(h){return h===P||h.type===w||h.type===m},ue=function(h,y,E,k,$){for(var j=[],O=k,I=0,z=0;O;++z)O&1&&(j[z]=$[I++]),O>>>=1;return j[y]=E,de(h,I+1,j)},me=function(h,y,E,k){for(var $=new Array(y-1),j=0,O=0,I=0,z=k.length;I<z;++I)if(I!==E){var ne=k[I];ne&&!U(ne)&&($[j++]=ne,O|=1<<I)}return J(h,O,$)},ot=function f(h,y,E,k,$,j){if(E===$)return xe(h,E,[j,k]);var O=g(y,E),I=g(y,$);return J(h,_(O)|_(I),O===I?[f(h,y+r,E,k,$,j)]:O<I?[k,j]:[j,k])},it=function(h,y,E,k,$,j,O,I){for(var z=$.length,ne=0;ne<z;++ne){var pe=$[ne];if(E(O,pe.key)){var le=pe.value,we=j(le);return we===le?$:we===c?(--I.value,R(h,ne,$)):b(h,ne,fe(y,k,O,we),$)}}var Te=j();return Te===c?$:(++I.value,b(h,z,fe(y,k,O,Te),$))},Pe=function(h,y){return h===y.edit},at=function(h,y,E,k,$,j,O){if(y(j,this.key)){var I=k(this.value);return I===this.value?this:I===c?(--O.value,P):Pe(h,this)?(this.value=I,this):fe(h,$,j,I)}var z=k();return z===c?this:(++O.value,ot(h,E,this.hash,this,$,fe(h,$,j,z)))},ct=function(h,y,E,k,$,j,O){if($===this.hash){var I=Pe(h,this),z=it(I,h,y,this.hash,this.children,k,j,O);return z===this.children?this:z.length>1?xe(h,this.hash,z):z[0]}var ne=k();return ne===c?this:(++O.value,ot(h,E,this.hash,this,$,fe(h,$,j,ne)))},H=function(h,y,E,k,$,j,O){var I=this.mask,z=this.children,ne=g(E,$),pe=_(ne),le=v(I,pe),we=I&pe,Te=we?z[le]:P,lt=Te._modify(h,y,E+r,k,$,j,O);if(Te===lt)return this;var nn=Pe(h,this),Ct=I,Nt=void 0;if(we&&U(lt)){if(Ct&=~pe,!Ct)return P;if(z.length<=2&&Ke(z[le^1]))return z[le^1];Nt=R(nn,le,z)}else if(!we&&!U(lt)){if(z.length>=i)return ue(h,ne,lt,I,z);Ct|=pe,Nt=C(nn,le,lt,z)}else Nt=b(nn,le,lt,z);return nn?(this.mask=Ct,this.children=Nt,this):J(h,Ct,Nt)},G=function(h,y,E,k,$,j,O){var I=this.size,z=this.children,ne=g(E,$),pe=z[ne],le=(pe||P)._modify(h,y,E+r,k,$,j,O);if(pe===le)return this;var we=Pe(h,this),Te=void 0;if(U(pe)&&!U(le))++I,Te=b(we,ne,le,z);else if(!U(pe)&&U(le)){if(--I,I<=a)return me(h,I,ne,z);Te=b(we,ne,P,z)}else Te=b(we,ne,le,z);return we?(this.size=I,this.children=Te,this):de(h,I,Te)};P._modify=function(f,h,y,E,k,$,j){var O=E();return O===c?P:(++j.value,fe(f,k,$,O))};function p(f,h,y,E,k){this._editable=f,this._edit=h,this._config=y,this._root=E,this._size=k}p.prototype.setTree=function(f,h){return this._editable?(this._root=f,this._size=h,this):f===this._root?this:new p(this._editable,this._edit,this._config,f,h)};var S=t.tryGetHash=function(f,h,y,E){for(var k=E._root,$=0,j=E._config.keyEq;;)switch(k.type){case w:return j(y,k.key)?k.value:f;case m:{if(h===k.hash)for(var O=k.children,I=0,z=O.length;I<z;++I){var ne=O[I];if(j(y,ne.key))return ne.value}return f}case L:{var pe=g($,h),le=_(pe);if(k.mask&le){k=k.children[v(k.mask,le)],$+=r;break}return f}case F:{if(k=k.children[g($,h)],k){$+=r;break}return f}default:return f}};p.prototype.tryGetHash=function(f,h,y){return S(f,h,y,this)};var T=t.tryGet=function(f,h,y){return S(f,y._config.hash(h),h,y)};p.prototype.tryGet=function(f,h){return T(f,h,this)};var D=t.getHash=function(f,h,y){return S(void 0,f,h,y)};p.prototype.getHash=function(f,h){return D(f,h,this)},t.get=function(f,h){return S(void 0,h._config.hash(f),f,h)},p.prototype.get=function(f,h){return T(h,f,this)};var N=t.has=function(f,h,y){return S(c,f,h,y)!==c};p.prototype.hasHash=function(f,h){return N(f,h,this)};var K=t.has=function(f,h){return N(h._config.hash(f),f,h)};p.prototype.has=function(f){return K(f,this)};var W=function(h,y){return h===y};t.make=function(f){return new p(0,0,{keyEq:f&&f.keyEq||W,hash:f&&f.hash||u},P,0)},t.empty=t.make();var x=t.isEmpty=function(f){return f&&!!U(f._root)};p.prototype.isEmpty=function(){return x(this)};var te=t.modifyHash=function(f,h,y,E){var k={value:E._size},$=E._root._modify(E._editable?E._edit:NaN,E._config.keyEq,0,f,h,y,k);return E.setTree($,k.value)};p.prototype.modifyHash=function(f,h,y){return te(y,f,h,this)};var ie=t.modify=function(f,h,y){return te(f,y._config.hash(h),h,y)};p.prototype.modify=function(f,h){return ie(h,f,this)};var Z=t.setHash=function(f,h,y,E){return te(l(y),f,h,E)};p.prototype.setHash=function(f,h,y){return Z(f,h,y,this)};var oe=t.set=function(f,h,y){return Z(y._config.hash(f),f,h,y)};p.prototype.set=function(f,h){return oe(f,h,this)};var Re=l(c),He=t.removeHash=function(f,h,y){return te(Re,f,h,y)};p.prototype.removeHash=p.prototype.deleteHash=function(f,h){return He(f,h,this)};var be=t.remove=function(f,h){return He(h._config.hash(f),f,h)};p.prototype.remove=p.prototype.delete=function(f){return be(f,this)};var ye=t.beginMutation=function(f){return new p(f._editable+1,f._edit+1,f._config,f._root,f._size)};p.prototype.beginMutation=function(){return ye(this)};var es=t.endMutation=function(f){return f._editable=f._editable&&f._editable-1,f};p.prototype.endMutation=function(){return es(this)};var Gi=t.mutate=function(f,h){var y=ye(h);return f(y),es(y)};p.prototype.mutate=function(f){return Gi(f,this)};var Hn=function(h){return h&&ts(h[0],h[1],h[2],h[3],h[4])},ts=function(h,y,E,k,$){for(;E<h;){var j=y[E++];if(j&&!U(j))return ns(j,k,[h,y,E,k,$])}return Hn($)},ns=function(h,y,E){switch(h.type){case w:return{value:y(h),rest:E};case m:case F:case L:var k=h.children;return ts(k.length,k,0,y,E);default:return Hn(E)}},Ji={done:!0};function Gn(f){this.v=f}Gn.prototype.next=function(){if(!this.v)return Ji;var f=this.v;return this.v=Hn(f.rest),f},Gn.prototype[Symbol.iterator]=function(){return this};var Jn=function(h,y){return new Gn(ns(h._root,y))},Zi=function(h){return[h.key,h.value]},Yi=t.entries=function(f){return Jn(f,Zi)};p.prototype.entries=p.prototype[Symbol.iterator]=function(){return Yi(this)};var Xi=function(h){return h.key},Qi=t.keys=function(f){return Jn(f,Xi)};p.prototype.keys=function(){return Qi(this)};var ea=function(h){return h.value},ta=t.values=p.prototype.values=function(f){return Jn(f,ea)};p.prototype.values=function(){return ta(this)};var rs=t.fold=function(f,h,y){var E=y._root;if(E.type===w)return f(h,E.value,E.key);for(var k=[E.children],$=void 0;$=k.pop();)for(var j=0,O=$.length;j<O;){var I=$[j++];I&&I.type&&(I.type===w?h=f(h,I.value,I.key):k.push(I.children))}return h};p.prototype.fold=function(f,h){return rs(f,h,this)};var na=t.forEach=function(f,h){return rs(function(y,E,k){return f(E,k,h)},null,h)};p.prototype.forEach=function(f){return na(f,this)};var ra=t.count=function(f){return f._size};p.prototype.count=function(){return ra(this)},Object.defineProperty(p.prototype,"size",{get:p.prototype.count}),n.exports?n.exports=t:(void 0).hamt=t});class id{constructor(e){V(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,t){return this._map.set(e,t),this}delete(e){return this._map.delete(e),this}clone(){return Fr(this)}toMap(){return new Map(this._map)}}class Br{constructor(e){if(V(this,"_hamt",od.empty.beginMutation()),e instanceof Br){const t=e._hamt.endMutation();e._hamt=t.beginMutation(),this._hamt=t.beginMutation()}else if(e)for(const[t,r]of e.entries())this._hamt.set(t,r)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,t){return this._hamt.set(e,t),this}delete(e){return this._hamt.delete(e),this}clone(){return Fr(this)}toMap(){return new Map(this._hamt)}}function Fr(n){return X("recoil_hamt_2020")?new Br(n):new id(n)}var ad={persistentMap:Fr},cd=ad.persistentMap,ld=Object.freeze({__proto__:null,persistentMap:cd});function ud(n,...e){const t=new Set;e:for(const r of n){for(const s of e)if(s.has(r))continue e;t.add(r)}return t}var zt=ud;function dd(n,e){const t=new Map;return n.forEach((r,s)=>{t.set(s,e(r,s))}),t}var mn=dd;function hd(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function fd(n){return{nodeDeps:mn(n.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:mn(n.nodeToNodeSubscriptions,e=>new Set(e))}}function ir(n,e,t,r){const{nodeDeps:s,nodeToNodeSubscriptions:o}=t,i=s.get(n);if(i&&r&&i!==r.nodeDeps.get(n))return;s.set(n,e);const a=i==null?e:zt(e,i);for(const c of a)o.has(c)||o.set(c,new Set),re(o.get(c)).add(n);if(i){const c=zt(i,e);for(const l of c){if(!o.has(l))return;const u=re(o.get(l));u.delete(n),u.size===0&&o.delete(l)}}}function pd(n,e,t,r){var s,o,i,a;const c=t.getState();r===c.currentTree.version||r===((s=c.nextTree)===null||s===void 0?void 0:s.version)||((o=c.previousTree)===null||o===void 0||o.version);const l=t.getGraph(r);if(ir(n,e,l),r===((i=c.previousTree)===null||i===void 0?void 0:i.version)){const d=t.getGraph(c.currentTree.version);ir(n,e,d,l)}if(r===((a=c.previousTree)===null||a===void 0?void 0:a.version)||r===c.currentTree.version){var u;const d=(u=c.nextTree)===null||u===void 0?void 0:u.version;if(d!==void 0){const g=t.getGraph(d);ir(n,e,g,l)}}}var Xt={cloneGraph:fd,graph:hd,saveDepsToStore:pd};let gd=0;const vd=()=>gd++;let _d=0;const md=()=>_d++;let yd=0;const bd=()=>yd++;var xn={getNextTreeStateVersion:vd,getNextStoreID:md,getNextComponentID:bd};const{persistentMap:Rs}=ld,{graph:wd}=Xt,{getNextTreeStateVersion:Vo}=xn;function Bo(){const n=Vo();return{version:n,stateID:n,transactionMetadata:{},dirtyAtoms:new Set,atomValues:Rs(),nonvalidatedAtoms:Rs()}}function Sd(){const n=Bo();return{currentTree:n,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(n.version,wd()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var Fo={makeEmptyTreeState:Bo,makeEmptyStoreState:Sd,getNextTreeStateVersion:Vo};class zo{}function Rd(){return new zo}var Pn={RetentionZone:zo,retentionZone:Rd};function Td(n,e){const t=new Set(n);return t.add(e),t}function Ed(n,e){const t=new Set(n);return t.delete(e),t}function kd(n,e,t){const r=new Map(n);return r.set(e,t),r}function Ad(n,e,t){const r=new Map(n);return r.set(e,t(r.get(e))),r}function $d(n,e){const t=new Map(n);return t.delete(e),t}function Cd(n,e){const t=new Map(n);return e.forEach(r=>t.delete(r)),t}var Wo={setByAddingToSet:Td,setByDeletingFromSet:Ed,mapBySettingInMap:kd,mapByUpdatingInMap:Ad,mapByDeletingFromMap:$d,mapByDeletingMultipleFromMap:Cd};function*Nd(n,e){let t=0;for(const r of n)e(r,t++)&&(yield r)}var zr=Nd;function Ld(n,e){return new Proxy(n,{get:(r,s)=>(!(s in r)&&s in e&&(r[s]=e[s]()),r[s]),ownKeys:r=>Object.keys(r)})}var qo=Ld;const{getNode:Qt,getNodeMaybe:xd,recoilValuesForKeys:Ts}=_e,{RetentionZone:Es}=Pn,{setByAddingToSet:Pd}=Wo,Od=Object.freeze(new Set);class Id extends Error{}function jd(n,e,t){if(!X("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=n.getState().retention;function s(o){let i=r.get(o);i||r.set(o,i=new Set),i.add(e)}if(t instanceof Es)s(t);else if(Array.isArray(t))for(const o of t)s(o);return()=>{if(!X("recoil_memory_managament_2020"))return;const{retention:o}=n.getState();function i(a){const c=o.nodesRetainedByZone.get(a);c==null||c.delete(e),c&&c.size===0&&o.nodesRetainedByZone.delete(a)}if(t instanceof Es)i(t);else if(Array.isArray(t))for(const a of t)i(a)}}function Wr(n,e,t,r){const s=n.getState();if(s.nodeCleanupFunctions.has(t))return;const o=Qt(t),i=jd(n,t,o.retainedBy),a=o.init(n,e,r);s.nodeCleanupFunctions.set(t,()=>{a(),i()})}function Ud(n,e,t){Wr(n,n.getState().currentTree,e,t)}function Dd(n,e){var t;const r=n.getState();(t=r.nodeCleanupFunctions.get(e))===null||t===void 0||t(),r.nodeCleanupFunctions.delete(e)}function Md(n,e,t){return Wr(n,e,t,"get"),Qt(t).get(n,e)}function Ko(n,e,t){return Qt(t).peek(n,e)}function Vd(n,e,t){var r;const s=xd(e);return s==null||(r=s.invalidate)===null||r===void 0||r.call(s,n),{...n,atomValues:n.atomValues.clone().delete(e),nonvalidatedAtoms:n.nonvalidatedAtoms.clone().set(e,t),dirtyAtoms:Pd(n.dirtyAtoms,e)}}function Bd(n,e,t,r){const s=Qt(t);if(s.set==null)throw new Id(`Attempt to set read-only RecoilValue: ${t}`);const o=s.set;return Wr(n,e,t,"set"),o(n,e,r)}function Fd(n,e,t){const r=n.getState(),s=n.getGraph(e.version),o=Qt(t).nodeType;return qo({type:o},{loadable:()=>Ko(n,e,t),isActive:()=>r.knownAtoms.has(t)||r.knownSelectors.has(t),isSet:()=>o==="selector"?!1:e.atomValues.has(t),isModified:()=>e.dirtyAtoms.has(t),deps:()=>{var i;return Ts((i=s.nodeDeps.get(t))!==null&&i!==void 0?i:[])},subscribers:()=>{var i,a;return{nodes:Ts(zr(Ho(n,e,new Set([t])),c=>c!==t)),components:Ln((i=(a=r.nodeToComponentSubscriptions.get(t))===null||a===void 0?void 0:a.values())!==null&&i!==void 0?i:[],([c])=>({name:c}))}}})}function Ho(n,e,t){const r=new Set,s=Array.from(t),o=n.getGraph(e.version);for(let a=s.pop();a;a=s.pop()){var i;r.add(a);const c=(i=o.nodeToNodeSubscriptions.get(a))!==null&&i!==void 0?i:Od;for(const l of c)r.has(l)||s.push(l)}return r}var We={getNodeLoadable:Md,peekNodeLoadable:Ko,setNodeValue:Bd,initializeNode:Ud,cleanUpNode:Dd,setUnvalidatedAtomValue_DEPRECATED:Vd,peekNodeInfo:Fd,getDownstreamNodes:Ho};let Go=null;function zd(n){Go=n}function Wd(){var n;(n=Go)===null||n===void 0||n()}var Jo={setInvalidateMemoizedSnapshot:zd,invalidateMemoizedSnapshot:Wd};const{getDownstreamNodes:qd,getNodeLoadable:Zo,setNodeValue:Kd}=We,{getNextComponentID:Hd}=xn,{getNode:Gd,getNodeMaybe:Yo}=_e,{DefaultValue:qr}=_e,{reactMode:Jd}=Yt,{AbstractRecoilValue:Zd,RecoilState:Yd,RecoilValueReadOnly:Xd,isRecoilValue:Qd}=wt,{invalidateMemoizedSnapshot:eh}=Jo;function th(n,{key:e},t=n.getState().currentTree){var r,s;const o=n.getState();t.version===o.currentTree.version||t.version===((r=o.nextTree)===null||r===void 0?void 0:r.version)||(t.version,(s=o.previousTree)===null||s===void 0||s.version);const i=Zo(n,t,e);return i.state==="loading"&&i.contents.catch(()=>{}),i}function nh(n,e){const t=n.clone();return e.forEach((r,s)=>{r.state==="hasValue"&&r.contents instanceof qr?t.delete(s):t.set(s,r)}),t}function rh(n,e,{key:t},r){if(typeof r=="function"){const s=Zo(n,e,t);if(s.state==="loading"){const o=`Tried to set atom or selector "${t}" using an updater function while the current state is pending, this is not currently supported.`;throw B(o)}else if(s.state==="hasError")throw s.contents;return r(s.contents)}else return r}function sh(n,e,t){if(t.type==="set"){const{recoilValue:s,valueOrUpdater:o}=t,i=rh(n,e,s,o),a=Kd(n,e,s.key,i);for(const[c,l]of a.entries())Tr(e,c,l)}else if(t.type==="setLoadable"){const{recoilValue:{key:s},loadable:o}=t;Tr(e,s,o)}else if(t.type==="markModified"){const{recoilValue:{key:s}}=t;e.dirtyAtoms.add(s)}else if(t.type==="setUnvalidated"){var r;const{recoilValue:{key:s},unvalidatedValue:o}=t,i=Yo(s);i==null||(r=i.invalidate)===null||r===void 0||r.call(i,e),e.atomValues.delete(s),e.nonvalidatedAtoms.set(s,o),e.dirtyAtoms.add(s)}else Dr(`Unknown action ${t.type}`)}function Tr(n,e,t){t.state==="hasValue"&&t.contents instanceof qr?n.atomValues.delete(e):n.atomValues.set(e,t),n.dirtyAtoms.add(e),n.nonvalidatedAtoms.delete(e)}function Xo(n,e){n.replaceState(t=>{const r=Qo(t);for(const s of e)sh(n,r,s);return ei(n,r),eh(),r})}function On(n,e){if(Wt.length){const t=Wt[Wt.length-1];let r=t.get(n);r||t.set(n,r=[]),r.push(e)}else Xo(n,[e])}const Wt=[];function oh(){const n=new Map;return Wt.push(n),()=>{for(const[e,t]of n)Xo(e,t);Wt.pop()}}function Qo(n){return{...n,atomValues:n.atomValues.clone(),nonvalidatedAtoms:n.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(n.dirtyAtoms)}}function ei(n,e){const t=qd(n,e,e.dirtyAtoms);for(const o of t){var r,s;(r=Yo(o))===null||r===void 0||(s=r.invalidate)===null||s===void 0||s.call(r,e)}}function ti(n,e,t){On(n,{type:"set",recoilValue:e,valueOrUpdater:t})}function ih(n,e,t){if(t instanceof qr)return ti(n,e,t);On(n,{type:"setLoadable",recoilValue:e,loadable:t})}function ah(n,e){On(n,{type:"markModified",recoilValue:e})}function ch(n,e,t){On(n,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:t})}function lh(n,{key:e},t,r=null){const s=Hd(),o=n.getState();o.nodeToComponentSubscriptions.has(e)||o.nodeToComponentSubscriptions.set(e,new Map),re(o.nodeToComponentSubscriptions.get(e)).set(s,[r??"<not captured>",t]);const i=Jd();if(i.early&&(i.mode==="LEGACY"||i.mode==="MUTABLE_SOURCE")){const a=n.getState().nextTree;a&&a.dirtyAtoms.has(e)&&t(a)}return{release:()=>{const a=n.getState(),c=a.nodeToComponentSubscriptions.get(e);c===void 0||!c.has(s)||(c.delete(s),c.size===0&&a.nodeToComponentSubscriptions.delete(e))}}}function uh(n,e){var t;const{currentTree:r}=n.getState(),s=Gd(e.key);(t=s.clearCache)===null||t===void 0||t.call(s,n,r)}var Ne={RecoilValueReadOnly:Xd,AbstractRecoilValue:Zd,RecoilState:Yd,getRecoilValueAsLoadable:th,setRecoilValue:ti,setRecoilValueLoadable:ih,markRecoilValueModified:ah,setUnvalidatedRecoilValue:ch,subscribeToRecoilValue:lh,isRecoilValue:Qd,applyAtomValueWrites:nh,batchStart:oh,writeLoadableToTreeState:Tr,invalidateDownstreams:ei,copyTreeState:Qo,refreshRecoilValue:uh};function dh(n,e,t){const r=n.entries();let s=r.next();for(;!s.done;){const o=s.value;if(e.call(t,o[1],o[0],n))return!0;s=r.next()}return!1}var hh=dh;const{cleanUpNode:fh}=We,{deleteNodeConfigIfPossible:ph,getNode:ni}=_e,{RetentionZone:ri}=Pn,gh=12e4,si=new Set;function oi(n,e){const t=n.getState(),r=t.currentTree;if(t.nextTree)return;const s=new Set;for(const i of e)if(i instanceof ri)for(const a of yh(t,i))s.add(a);else s.add(i);const o=vh(n,s);for(const i of o)mh(n,r,i)}function vh(n,e){const t=n.getState(),r=t.currentTree,s=n.getGraph(r.version),o=new Set,i=new Set;return a(e),o;function a(c){const l=new Set,u=_h(n,r,c,o,i);for(const v of u){var d;if(ni(v).retainedBy==="recoilRoot"){i.add(v);continue}if(((d=t.retention.referenceCounts.get(v))!==null&&d!==void 0?d:0)>0){i.add(v);continue}if(ii(v).some(R=>t.retention.referenceCounts.get(R))){i.add(v);continue}const b=s.nodeToNodeSubscriptions.get(v);if(b&&hh(b,R=>i.has(R))){i.add(v);continue}o.add(v),l.add(v)}const g=new Set;for(const v of l)for(const b of(_=s.nodeDeps.get(v))!==null&&_!==void 0?_:si){var _;o.has(b)||g.add(b)}g.size&&a(g)}}function _h(n,e,t,r,s){const o=n.getGraph(e.version),i=[],a=new Set;for(;t.size>0;)c(re(t.values().next().value));return i;function c(l){if(r.has(l)||s.has(l)){t.delete(l);return}if(a.has(l))return;const u=o.nodeToNodeSubscriptions.get(l);if(u)for(const d of u)c(d);a.add(l),t.delete(l),i.push(l)}}function mh(n,e,t){if(!X("recoil_memory_managament_2020"))return;fh(n,t);const r=n.getState();r.knownAtoms.delete(t),r.knownSelectors.delete(t),r.nodeTransactionSubscriptions.delete(t),r.retention.referenceCounts.delete(t);const s=ii(t);for(const c of s){var o;(o=r.retention.nodesRetainedByZone.get(c))===null||o===void 0||o.delete(t)}e.atomValues.delete(t),e.dirtyAtoms.delete(t),e.nonvalidatedAtoms.delete(t);const i=r.graphsByVersion.get(e.version);if(i){const c=i.nodeDeps.get(t);if(c!==void 0){i.nodeDeps.delete(t);for(const l of c){var a;(a=i.nodeToNodeSubscriptions.get(l))===null||a===void 0||a.delete(t)}}i.nodeToNodeSubscriptions.delete(t)}ph(t)}function yh(n,e){var t;return(t=n.retention.nodesRetainedByZone.get(e))!==null&&t!==void 0?t:si}function ii(n){const e=ni(n).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof ri?[e]:e}function bh(n,e){const t=n.getState();t.nextTree?t.retention.retainablesToCheckForRelease.add(e):oi(n,new Set([e]))}function wh(n,e,t){var r;if(!X("recoil_memory_managament_2020"))return;const s=n.getState().retention.referenceCounts,o=((r=s.get(e))!==null&&r!==void 0?r:0)+t;o===0?ai(n,e):s.set(e,o)}function ai(n,e){if(!X("recoil_memory_managament_2020"))return;n.getState().retention.referenceCounts.delete(e),bh(n,e)}function Sh(n){if(!X("recoil_memory_managament_2020"))return;const e=n.getState();oi(n,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function Rh(n){return n===void 0?"recoilRoot":n}var st={SUSPENSE_TIMEOUT_MS:gh,updateRetainCount:wh,updateRetainCountToZero:ai,releaseScheduledRetainablesNow:Sh,retainedByOptionWithDefault:Rh};const{unstable_batchedUpdates:Th}=aa;var Eh={unstable_batchedUpdates:Th};const{unstable_batchedUpdates:kh}=Eh;var Ah={unstable_batchedUpdates:kh};const{batchStart:$h}=Ne,{unstable_batchedUpdates:Ch}=Ah;let Kr=Ch||(n=>n());const Nh=n=>{Kr=n},Lh=()=>Kr,xh=n=>{Kr(()=>{let e=()=>{};try{e=$h(),n()}finally{e()}})};var In={getBatcher:Lh,setBatcher:Nh,batchUpdates:xh};function*Ph(n){for(const e of n)for(const t of e)yield t}var ci=Ph;const li=typeof Window>"u"||typeof window>"u",Oh=n=>!li&&(n===window||n instanceof Window),Ih=typeof navigator<"u"&&navigator.product==="ReactNative";var jn={isSSR:li,isReactNative:Ih,isWindow:Oh};function jh(n,e){let t;return(...r)=>{t||(t={});const s=e(...r);return Object.hasOwnProperty.call(t,s)||(t[s]=n(...r)),t[s]}}function Uh(n,e){let t,r;return(...s)=>{const o=e(...s);return t===o||(t=o,r=n(...s)),r}}function Dh(n,e){let t,r;return[(...i)=>{const a=e(...i);return t===a||(t=a,r=n(...i)),r},()=>{t=null}]}var Mh={memoizeWithArgsHash:jh,memoizeOneWithArgsHash:Uh,memoizeOneWithArgsHashAndInvalidation:Dh};const{batchUpdates:Er}=In,{initializeNode:Vh,peekNodeInfo:Bh}=We,{graph:Fh}=Xt,{getNextStoreID:zh}=xn,{DEFAULT_VALUE:Wh,recoilValues:ks,recoilValuesForKeys:As}=_e,{AbstractRecoilValue:qh,getRecoilValueAsLoadable:Kh,setRecoilValue:$s,setUnvalidatedRecoilValue:Hh}=Ne,{updateRetainCount:pn}=st,{setInvalidateMemoizedSnapshot:Gh}=Jo,{getNextTreeStateVersion:Jh,makeEmptyStoreState:Zh}=Fo,{isSSR:Yh}=jn,{memoizeOneWithArgsHashAndInvalidation:Xh}=Mh;class Un{constructor(e,t){V(this,"_store",void 0),V(this,"_refCount",1),V(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),Kh(this._store,r))),V(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),V(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];const i=this._store.getState().currentTree;return As(i.dirtyAtoms)}const s=this._store.getState().knownAtoms,o=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?ks.values():r.isInitialized===!0?As(ci([s,o])):zr(ks.values(),({key:i})=>!s.has(i)&&!o.has(i))}),V(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),Bh(this._store,this._store.getState().currentTree,r))),V(this,"map",r=>{this.checkRefCount_INTERNAL();const s=new kr(this,Er);return r(s),s}),V(this,"asyncMap",async r=>{this.checkRefCount_INTERNAL();const s=new kr(this,Er);return s.retain(),await r(s),s.autoRelease_INTERNAL(),s}),this._store={storeID:zh(),parentStoreID:t,getState:()=>e,replaceState:r=>{e.currentTree=r(e.currentTree)},getGraph:r=>{const s=e.graphsByVersion;if(s.has(r))return re(s.get(r));const o=Fh();return s.set(r,o),o},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw B("Cannot subscribe to Snapshots")}};for(const r of this._store.getState().knownAtoms)Vh(this._store,r,"get"),pn(this._store,r,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){Yh||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!X("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){X("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function ui(n,e,t=!1){const r=n.getState(),s=t?Jh():e.version;return{currentTree:{version:t?s:e.version,stateID:t?s:e.stateID,transactionMetadata:{...e.transactionMetadata},dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(s,n.getGraph(e.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(Ln(r.nodeCleanupFunctions.entries(),([o])=>[o,()=>{}]))}}function Qh(n){const e=new Un(Zh());return n!=null?e.map(n):e}const[Cs,di]=Xh((n,e)=>{var t;const r=n.getState(),s=e==="latest"?(t=r.nextTree)!==null&&t!==void 0?t:r.currentTree:re(r.previousTree);return new Un(ui(n,s),n.storeID)},(n,e)=>{var t,r;return String(e)+String(n.storeID)+String((t=n.getState().nextTree)===null||t===void 0?void 0:t.version)+String(n.getState().currentTree.version)+String((r=n.getState().previousTree)===null||r===void 0?void 0:r.version)});Gh(di);function ef(n,e="latest"){const t=Cs(n,e);return t.isRetained()?t:(di(),Cs(n,e))}class kr extends Un{constructor(e,t){super(ui(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),V(this,"_batch",void 0),V(this,"set",(r,s)=>{this.checkRefCount_INTERNAL();const o=this.getStore_INTERNAL();this._batch(()=>{pn(o,r.key,1),$s(this.getStore_INTERNAL(),r,s)})}),V(this,"reset",r=>{this.checkRefCount_INTERNAL();const s=this.getStore_INTERNAL();this._batch(()=>{pn(s,r.key,1),$s(this.getStore_INTERNAL(),r,Wh)})}),V(this,"setUnvalidatedAtomValues_DEPRECATED",r=>{this.checkRefCount_INTERNAL();const s=this.getStore_INTERNAL();Er(()=>{for(const[o,i]of r.entries())pn(s,o,1),Hh(s,new qh(o),i)})}),this._batch=t}}var Dn={Snapshot:Un,MutableSnapshot:kr,freshSnapshot:Qh,cloneSnapshot:ef},tf=Dn.Snapshot,nf=Dn.MutableSnapshot,rf=Dn.freshSnapshot,sf=Dn.cloneSnapshot,Mn=Object.freeze({__proto__:null,Snapshot:tf,MutableSnapshot:nf,freshSnapshot:rf,cloneSnapshot:sf});function of(...n){const e=new Set;for(const t of n)for(const r of t)e.add(r);return e}var af=of;const{useRef:cf}=se;function lf(n){const e=cf(n);return e.current===n&&typeof n=="function"&&(e.current=n()),e}var Ns=lf;const{getNextTreeStateVersion:uf,makeEmptyStoreState:hi}=Fo,{cleanUpNode:df,getDownstreamNodes:hf,initializeNode:ff,setNodeValue:pf,setUnvalidatedAtomValue_DEPRECATED:gf}=We,{graph:vf}=Xt,{cloneGraph:_f}=Xt,{getNextStoreID:fi}=xn,{createMutableSource:ar,reactMode:pi}=Yt,{applyAtomValueWrites:mf}=Ne,{releaseScheduledRetainablesNow:gi}=st,{freshSnapshot:yf}=Mn,{useCallback:bf,useContext:vi,useEffect:Ar,useMemo:wf,useRef:Sf,useState:Rf}=se;function Pt(){throw B("This component must be used inside a <RecoilRoot> component.")}const _i=Object.freeze({storeID:fi(),getState:Pt,replaceState:Pt,getGraph:Pt,subscribeToTransactions:Pt,addTransactionMetadata:Pt});let $r=!1;function Ls(n){if($r)throw B("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const e=n.getState();if(e.nextTree===null){X("recoil_memory_managament_2020")&&X("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&gi(n);const t=e.currentTree.version,r=uf();e.nextTree={...e.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},e.graphsByVersion.set(r,_f(re(e.graphsByVersion.get(t))))}}const mi=se.createContext({current:_i}),Vn=()=>vi(mi),yi=se.createContext(null);function Tf(){return vi(yi)}function Hr(n,e,t){const r=hf(n,t,t.dirtyAtoms);for(const s of r){const o=e.nodeToComponentSubscriptions.get(s);if(o)for(const[i,[a,c]]of o)c(t)}}function bi(n){const e=n.getState(),t=e.currentTree,r=t.dirtyAtoms;if(r.size){for(const[s,o]of e.nodeTransactionSubscriptions)if(r.has(s))for(const[i,a]of o)a(n);for(const[s,o]of e.transactionSubscriptions)o(n);(!pi().early||e.suspendedComponentResolvers.size>0)&&(Hr(n,e,t),e.suspendedComponentResolvers.forEach(s=>s()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(s=>s(t)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function Ef(n){const e=n.getState();e.commitDepth++;try{const{nextTree:t}=e;if(t==null)return;e.previousTree=e.currentTree,e.currentTree=t,e.nextTree=null,bi(n),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):Dr("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,X("recoil_memory_managament_2020")&&t==null&&gi(n)}finally{e.commitDepth--}}function kf({setNotifyBatcherOfChange:n}){const e=Vn(),[,t]=Rf([]);return n(()=>t({})),Ar(()=>(n(()=>t({})),()=>{n(()=>{})}),[n]),Ar(()=>{rd.enqueueExecution("Batcher",()=>{Ef(e.current)})}),null}function Af(n,e){const t=hi();return e({set:(r,s)=>{const o=t.currentTree,i=pf(n,o,r.key,s),a=new Set(i.keys()),c=o.nonvalidatedAtoms.clone();for(const l of a)c.delete(l);t.currentTree={...o,dirtyAtoms:af(o.dirtyAtoms,a),atomValues:mf(o.atomValues,i),nonvalidatedAtoms:c}},setUnvalidatedAtomValues:r=>{r.forEach((s,o)=>{t.currentTree=gf(t.currentTree,o,s)})}}),t}function $f(n){const e=yf(n),t=e.getStore_INTERNAL().getState();return e.retain(),t.nodeCleanupFunctions.forEach(r=>r()),t.nodeCleanupFunctions.clear(),t}let xs=0;function Cf({initializeState_DEPRECATED:n,initializeState:e,store_INTERNAL:t,children:r}){let s;const o=_=>{const v=s.current.graphsByVersion;if(v.has(_))return re(v.get(_));const b=vf();return v.set(_,b),b},i=(_,v)=>{if(v==null){const{transactionSubscriptions:b}=d.current.getState(),R=xs++;return b.set(R,_),{release:()=>{b.delete(R)}}}else{const{nodeTransactionSubscriptions:b}=d.current.getState();b.has(v)||b.set(v,new Map);const R=xs++;return re(b.get(v)).set(R,_),{release:()=>{const C=b.get(v);C&&(C.delete(R),C.size===0&&b.delete(v))}}}},a=_=>{Ls(d.current);for(const v of Object.keys(_))re(d.current.getState().nextTree).transactionMetadata[v]=_[v]},c=_=>{Ls(d.current);const v=re(s.current.nextTree);let b;try{$r=!0,b=_(v)}finally{$r=!1}b!==v&&(s.current.nextTree=b,pi().early&&Hr(d.current,s.current,b),re(l.current)())},l=Sf(null),u=bf(_=>{l.current=_},[l]),d=Ns(()=>t??{storeID:fi(),getState:()=>s.current,replaceState:c,getGraph:o,subscribeToTransactions:i,addTransactionMetadata:a});t!=null&&(d.current=t),s=Ns(()=>n!=null?Af(d.current,n):e!=null?$f(e):hi());const g=wf(()=>ar==null?void 0:ar(s,()=>s.current.currentTree.version),[s]);return Ar(()=>{const _=d.current;for(const v of new Set(_.getState().knownAtoms))ff(_,v,"get");return()=>{for(const v of _.getState().knownAtoms)df(_,v)}},[d]),se.createElement(mi.Provider,{value:d},se.createElement(yi.Provider,{value:g},se.createElement(kf,{setNotifyBatcherOfChange:u}),r))}function Nf(n){const{override:e,...t}=n,r=Vn();return e===!1&&r.current!==_i?n.children:se.createElement(Cf,t)}function Lf(){return Vn().current.storeID}var De={RecoilRoot:Nf,useStoreRef:Vn,useRecoilMutableSource:Tf,useRecoilStoreID:Lf,notifyComponents_FOR_TESTING:Hr,sendEndOfBatchNotifications_FOR_TESTING:bi};function xf(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}var Pf=xf;const{useEffect:Of,useRef:If}=se;function jf(n){const e=If();return Of(()=>{e.current=n}),e.current}var wi=jf;const{useStoreRef:Uf}=De,{SUSPENSE_TIMEOUT_MS:Df}=st,{updateRetainCount:Ot}=st,{RetentionZone:Mf}=Pn,{useEffect:Vf,useRef:Bf}=se,{isSSR:Ps}=jn;function Ff(n){if(X("recoil_memory_managament_2020"))return zf(n)}function zf(n){const t=(Array.isArray(n)?n:[n]).map(i=>i instanceof Mf?i:i.key),r=Uf();Vf(()=>{if(!X("recoil_memory_managament_2020"))return;const i=r.current;if(s.current&&!Ps)window.clearTimeout(s.current),s.current=null;else for(const a of t)Ot(i,a,1);return()=>{for(const a of t)Ot(i,a,-1)}},[r,...t]);const s=Bf(),o=wi(t);if(!Ps&&(o===void 0||!Pf(o,t))){const i=r.current;for(const a of t)Ot(i,a,1);if(o)for(const a of o)Ot(i,a,-1);s.current&&window.clearTimeout(s.current),s.current=window.setTimeout(()=>{s.current=null;for(const a of t)Ot(i,a,-1)},Df)}}var Gr=Ff;function Wf(){return"<component name not available>"}var en=Wf;const{batchUpdates:qf}=In,{DEFAULT_VALUE:Si}=_e,{currentRendererSupportsUseSyncExternalStore:Kf,reactMode:$t,useMutableSource:Hf,useSyncExternalStore:Gf}=Yt,{useRecoilMutableSource:Jf,useStoreRef:Le}=De,{AbstractRecoilValue:Cr,getRecoilValueAsLoadable:tn,setRecoilValue:yn,setUnvalidatedRecoilValue:Zf,subscribeToRecoilValue:St}=Ne,{useCallback:ve,useEffect:Rt,useMemo:Ri,useRef:qt,useState:Jr}=se,{setByAddingToSet:Yf}=Wo,{isSSR:Xf}=jn;function Zr(n,e,t){if(n.state==="hasValue")return n.contents;throw n.state==="loading"?new Promise(s=>{const o=t.current.getState().suspendedComponentResolvers;o.add(s),Xf&&ee(n.contents)&&n.contents.finally(()=>{o.delete(s)})}):n.state==="hasError"?n.contents:B(`Invalid value of loadable atom "${e.key}"`)}function Qf(){const n=en(),e=Le(),[,t]=Jr([]),r=qt(new Set);r.current=new Set;const s=qt(new Set),o=qt(new Map),i=ve(c=>{const l=o.current.get(c);l&&(l.release(),o.current.delete(c))},[o]),a=ve((c,l)=>{o.current.has(l)&&t([])},[]);return Rt(()=>{const c=e.current;zt(r.current,s.current).forEach(l=>{if(o.current.has(l))return;const u=St(c,new Cr(l),g=>a(g,l),n);o.current.set(l,u),c.getState().nextTree?c.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a(c.getState(),l)}):a(c.getState(),l)}),zt(s.current,r.current).forEach(l=>{i(l)}),s.current=r.current}),Rt(()=>{const c=o.current;return zt(r.current,new Set(c.keys())).forEach(l=>{const u=St(e.current,new Cr(l),d=>a(d,l),n);c.set(l,u)}),()=>c.forEach((l,u)=>i(u))},[n,e,i,a]),Ri(()=>{function c(v){return b=>{yn(e.current,v,b)}}function l(v){return()=>yn(e.current,v,Si)}function u(v){var b;r.current.has(v.key)||(r.current=Yf(r.current,v.key));const R=e.current.getState();return tn(e.current,v,$t().early&&(b=R.nextTree)!==null&&b!==void 0?b:R.currentTree)}function d(v){const b=u(v);return Zr(b,v,e)}function g(v){return[d(v),c(v)]}function _(v){return[u(v),c(v)]}return{getRecoilValue:d,getRecoilValueLoadable:u,getRecoilState:g,getRecoilStateLoadable:_,getSetRecoilState:c,getResetRecoilState:l}},[r,e])}const ep={current:0};function tp(n){const e=Le(),t=en(),r=ve(()=>{var a;const c=e.current,l=c.getState(),u=$t().early&&(a=l.nextTree)!==null&&a!==void 0?a:l.currentTree;return{loadable:tn(c,n,u),key:n.key}},[e,n]),s=ve(a=>{let c;return()=>{var l,u;const d=a();return(l=c)!==null&&l!==void 0&&l.loadable.is(d.loadable)&&((u=c)===null||u===void 0?void 0:u.key)===d.key?c:(c=d,d)}},[]),o=Ri(()=>s(r),[r,s]),i=ve(a=>{const c=e.current;return St(c,n,a,t).release},[e,n,t]);return Gf(i,o,o).loadable}function np(n){const e=Le(),t=ve(()=>{var l;const u=e.current,d=u.getState(),g=$t().early&&(l=d.nextTree)!==null&&l!==void 0?l:d.currentTree;return tn(u,n,g)},[e,n]),r=ve(()=>t(),[t]),s=en(),o=ve((l,u)=>{const d=e.current;return St(d,n,()=>{if(!X("recoil_suppress_rerender_in_callback"))return u();const _=t();c.current.is(_)||u(),c.current=_},s).release},[e,n,s,t]),i=Jf();if(i==null)throw B("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=Hf(i,r,o),c=qt(a);return Rt(()=>{c.current=a}),a}function Nr(n){const e=Le(),t=en(),r=ve(()=>{var c;const l=e.current,u=l.getState(),d=$t().early&&(c=u.nextTree)!==null&&c!==void 0?c:u.currentTree;return tn(l,n,d)},[e,n]),s=ve(()=>({loadable:r(),key:n.key}),[r,n.key]),o=ve(c=>{const l=s();return c.loadable.is(l.loadable)&&c.key===l.key?c:l},[s]);Rt(()=>{const c=St(e.current,n,l=>{a(o)},t);return a(o),c.release},[t,n,e,o]);const[i,a]=Jr(s);return i.key!==n.key?s().loadable:i.loadable}function rp(n){const e=Le(),[,t]=Jr([]),r=en(),s=ve(()=>{var a;const c=e.current,l=c.getState(),u=$t().early&&(a=l.nextTree)!==null&&a!==void 0?a:l.currentTree;return tn(c,n,u)},[e,n]),o=s(),i=qt(o);return Rt(()=>{i.current=o}),Rt(()=>{const a=e.current,c=a.getState(),l=St(a,n,d=>{var g;if(!X("recoil_suppress_rerender_in_callback"))return t([]);const _=s();(g=i.current)!==null&&g!==void 0&&g.is(_)||t(_),i.current=_},r);if(c.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{i.current=null,t([])});else{var u;if(!X("recoil_suppress_rerender_in_callback"))return t([]);const d=s();(u=i.current)!==null&&u!==void 0&&u.is(d)||t(d),i.current=d}return l.release},[r,s,n,e]),o}function Yr(n){return X("recoil_memory_managament_2020")&&Gr(n),{TRANSITION_SUPPORT:Nr,SYNC_EXTERNAL_STORE:Kf()?tp:Nr,MUTABLE_SOURCE:np,LEGACY:rp}[$t().mode](n)}function Ti(n){const e=Le(),t=Yr(n);return Zr(t,n,e)}function Bn(n){const e=Le();return ve(t=>{yn(e.current,n,t)},[e,n])}function sp(n){const e=Le();return ve(()=>{yn(e.current,n,Si)},[e,n])}function op(n){return[Ti(n),Bn(n)]}function ip(n){return[Yr(n),Bn(n)]}function ap(){const n=Le();return(e,t={})=>{qf(()=>{n.current.addTransactionMetadata(t),e.forEach((r,s)=>Zf(n.current,new Cr(s),r))})}}function Ei(n){return X("recoil_memory_managament_2020")&&Gr(n),Nr(n)}function ki(n){const e=Le(),t=Ei(n);return Zr(t,n,e)}function cp(n){return[ki(n),Bn(n)]}var lp={recoilComponentGetRecoilValueCount_FOR_TESTING:ep,useRecoilInterface:Qf,useRecoilState:op,useRecoilStateLoadable:ip,useRecoilValue:Ti,useRecoilValueLoadable:Yr,useResetRecoilState:sp,useSetRecoilState:Bn,useSetUnvalidatedAtomValues:ap,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Ei,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:ki,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:cp};function up(n,e){const t=new Map;for(const[r,s]of n)e(s,r)&&t.set(r,s);return t}var dp=up;function hp(n,e){const t=new Set;for(const r of n)e(r)&&t.add(r);return t}var fp=hp;function pp(...n){const e=new Map;for(let t=0;t<n.length;t++){const r=n[t].keys();let s;for(;!(s=r.next()).done;)e.set(s.value,n[t].get(s.value))}return e}var gp=pp;const{batchUpdates:vp}=In,{DEFAULT_VALUE:_p,getNode:Ai,nodes:mp}=_e,{useStoreRef:Xr}=De,{AbstractRecoilValue:yp,setRecoilValueLoadable:bp}=Ne,{SUSPENSE_TIMEOUT_MS:wp}=st,{cloneSnapshot:bn}=Mn,{useCallback:Fn,useEffect:$i,useRef:Os,useState:Sp}=se,{isSSR:Is}=jn;function zn(n){const e=Xr();$i(()=>e.current.subscribeToTransactions(n).release,[n,e])}function js(n){const e=n.atomValues.toMap(),t=mn(dp(e,(r,s)=>{const i=Ai(s).persistence_UNSTABLE;return i!=null&&i.type!=="none"&&r.state==="hasValue"}),r=>r.contents);return gp(n.nonvalidatedAtoms.toMap(),t)}function Rp(n){zn(Fn(e=>{let t=e.getState().previousTree;const r=e.getState().currentTree;t||(t=e.getState().currentTree);const s=js(r),o=js(t),i=mn(mp,c=>{var l,u,d,g;return{persistence_UNSTABLE:{type:(l=(u=c.persistence_UNSTABLE)===null||u===void 0?void 0:u.type)!==null&&l!==void 0?l:"none",backButton:(d=(g=c.persistence_UNSTABLE)===null||g===void 0?void 0:g.backButton)!==null&&d!==void 0?d:!1}}}),a=fp(r.dirtyAtoms,c=>s.has(c)||o.has(c));n({atomValues:s,previousAtomValues:o,atomInfo:i,modifiedAtoms:a,transactionMetadata:{...r.transactionMetadata}})},[n]))}function Tp(n){zn(Fn(e=>{const t=bn(e,"latest"),r=bn(e,"previous");n({snapshot:t,previousSnapshot:r})},[n]))}function Ep(){const n=Xr(),[e,t]=Sp(()=>bn(n.current)),r=wi(e),s=Os(),o=Os();if(zn(Fn(a=>t(bn(a)),[])),$i(()=>{const a=e.retain();if(s.current&&!Is){var c;window.clearTimeout(s.current),s.current=null,(c=o.current)===null||c===void 0||c.call(o),o.current=null}return()=>{window.setTimeout(a,10)}},[e]),r!==e&&!Is){if(s.current){var i;window.clearTimeout(s.current),s.current=null,(i=o.current)===null||i===void 0||i.call(o),o.current=null}o.current=e.retain(),s.current=window.setTimeout(()=>{var a;s.current=null,(a=o.current)===null||a===void 0||a.call(o),o.current=null},wp)}return e}function Ci(n,e){var t;const r=n.getState(),s=(t=r.nextTree)!==null&&t!==void 0?t:r.currentTree,o=e.getStore_INTERNAL().getState().currentTree;vp(()=>{const i=new Set;for(const l of[s.atomValues.keys(),o.atomValues.keys()])for(const u of l){var a,c;((a=s.atomValues.get(u))===null||a===void 0?void 0:a.contents)!==((c=o.atomValues.get(u))===null||c===void 0?void 0:c.contents)&&Ai(u).shouldRestoreFromSnapshots&&i.add(u)}i.forEach(l=>{bp(n,new yp(l),o.atomValues.has(l)?re(o.atomValues.get(l)):_p)}),n.replaceState(l=>({...l,stateID:e.getID()}))})}function kp(){const n=Xr();return Fn(e=>Ci(n.current,e),[n])}var Ni={useRecoilSnapshot:Ep,gotoSnapshot:Ci,useGotoRecoilSnapshot:kp,useRecoilTransactionObserver:Tp,useTransactionObservation_DEPRECATED:Rp,useTransactionSubscription_DEPRECATED:zn};const{peekNodeInfo:Ap}=We,{useStoreRef:$p}=De;function Cp(){const n=$p();return({key:e})=>Ap(n.current,n.current.getState().currentTree,e)}var Np=Cp;const{reactMode:Lp}=Yt,{RecoilRoot:xp,useStoreRef:Pp}=De,{useMemo:Op}=se;function Ip(){Lp().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const n=Pp().current;return Op(()=>{function e({children:t}){return se.createElement(xp,{store_INTERNAL:n},t)}return e},[n])}var jp=Ip;const{loadableWithValue:Up}=Zt,{initializeNode:Dp}=We,{DEFAULT_VALUE:Mp,getNode:Vp}=_e,{copyTreeState:Bp,getRecoilValueAsLoadable:Fp,invalidateDownstreams:zp,writeLoadableToTreeState:Wp}=Ne;function Us(n){return Vp(n.key).nodeType==="atom"}class qp{constructor(e,t){V(this,"_store",void 0),V(this,"_treeState",void 0),V(this,"_changes",void 0),V(this,"get",r=>{if(this._changes.has(r.key))return this._changes.get(r.key);if(!Us(r))throw B("Reading selectors within atomicUpdate is not supported");const s=Fp(this._store,r,this._treeState);if(s.state==="hasValue")return s.contents;throw s.state==="hasError"?s.contents:B(`Expected Recoil atom ${r.key} to have a value, but it is in a loading state.`)}),V(this,"set",(r,s)=>{if(!Us(r))throw B("Setting selectors within atomicUpdate is not supported");if(typeof s=="function"){const o=this.get(r);this._changes.set(r.key,s(o))}else Dp(this._store,r.key,"set"),this._changes.set(r.key,s)}),V(this,"reset",r=>{this.set(r,Mp)}),this._store=e,this._treeState=t,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const e=Bp(this._treeState);for(const[t,r]of this._changes)Wp(e,t,Up(r));return zp(this._store,e),e}}function Kp(n){return e=>{n.replaceState(t=>{const r=new qp(n,t);return e(r),r.newTreeState_INTERNAL()})}}var Hp={atomicUpdater:Kp},Gp=Hp.atomicUpdater,Li=Object.freeze({__proto__:null,atomicUpdater:Gp});function Jp(n,e){if(!n)throw new Error(e)}var Zp=Jp,Mt=Zp;const{atomicUpdater:Yp}=Li,{batchUpdates:Xp}=In,{DEFAULT_VALUE:Qp}=_e,{useStoreRef:eg}=De,{refreshRecoilValue:tg,setRecoilValue:Ds}=Ne,{cloneSnapshot:ng}=Mn,{gotoSnapshot:rg}=Ni,{useCallback:sg}=se;class xi{}const og=new xi;function Pi(n,e,t,r){let s=og,o;if(Xp(()=>{const a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw B(a);const c=qo({...r??{},set:(u,d)=>Ds(n,u,d),reset:u=>Ds(n,u,Qp),refresh:u=>tg(n,u),gotoSnapshot:u=>rg(n,u),transact_UNSTABLE:u=>Yp(n)(u)},{snapshot:()=>{const u=ng(n);return o=u.retain(),u}}),l=e(c);if(typeof l!="function")throw B(a);s=l(...t)}),s instanceof xi&&Mt(!1),ee(s))s=s.finally(()=>{var a;(a=o)===null||a===void 0||a()});else{var i;(i=o)===null||i===void 0||i()}return s}function ig(n,e){const t=eg();return sg((...r)=>Pi(t.current,n,r),e!=null?[...e,t]:void 0)}var Oi={recoilCallback:Pi,useRecoilCallback:ig};const{useStoreRef:ag}=De,{refreshRecoilValue:cg}=Ne,{useCallback:lg}=se;function ug(n){const e=ag();return lg(()=>{const t=e.current;cg(t,n)},[n,e])}var dg=ug;const{atomicUpdater:hg}=Li,{useStoreRef:fg}=De,{useMemo:pg}=se;function gg(n,e){const t=fg();return pg(()=>(...r)=>{hg(t.current)(o=>{n(o)(...r)})},e!=null?[...e,t]:void 0)}var vg=gg;class _g{constructor(e){V(this,"value",void 0),this.value=e}}var mg={WrappedValue:_g},yg=mg.WrappedValue,Ii=Object.freeze({__proto__:null,WrappedValue:yg});const{isFastRefreshEnabled:bg}=Yt;class Ms extends Error{}class wg{constructor(e){var t,r,s;V(this,"_name",void 0),V(this,"_numLeafs",void 0),V(this,"_root",void 0),V(this,"_onHit",void 0),V(this,"_onSet",void 0),V(this,"_mapNodeValue",void 0),this._name=e==null?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=(t=e==null?void 0:e.onHit)!==null&&t!==void 0?t:()=>{},this._onSet=(r=e==null?void 0:e.onSet)!==null&&r!==void 0?r:()=>{},this._mapNodeValue=(s=e==null?void 0:e.mapNodeValue)!==null&&s!==void 0?s:o=>o}size(){return this._numLeafs}root(){return this._root}get(e,t){var r;return(r=this.getLeafNode(e,t))===null||r===void 0?void 0:r.value}getLeafNode(e,t){if(this._root==null)return;let r=this._root;for(;r;){if(t==null||t.onNodeVisit(r),r.type==="leaf")return this._onHit(r),r;const s=this._mapNodeValue(e(r.nodeKey));r=r.branches.get(s)}}set(e,t,r){const s=()=>{var o,i,a,c;let l,u;for(const[R,C]of e){var d,g,_;const w=this._root;if((w==null?void 0:w.type)==="leaf")throw this.invalidCacheError();const m=l;if(l=m?m.branches.get(u):w,l=(d=l)!==null&&d!==void 0?d:{type:"branch",nodeKey:R,parent:m,branches:new Map,branchKey:u},l.type!=="branch"||l.nodeKey!==R)throw this.invalidCacheError();m==null||m.branches.set(u,l),r==null||(g=r.onNodeVisit)===null||g===void 0||g.call(r,l),u=this._mapNodeValue(C),this._root=(_=this._root)!==null&&_!==void 0?_:l}const v=l?(o=l)===null||o===void 0?void 0:o.branches.get(u):this._root;if(v!=null&&(v.type!=="leaf"||v.branchKey!==u))throw this.invalidCacheError();const b={type:"leaf",value:t,parent:l,branchKey:u};(i=l)===null||i===void 0||i.branches.set(u,b),this._root=(a=this._root)!==null&&a!==void 0?a:b,this._numLeafs++,this._onSet(b),r==null||(c=r.onNodeVisit)===null||c===void 0||c.call(r,b)};try{s()}catch(o){if(o instanceof Ms)this.clear(),s();else throw o}}delete(e){const t=this.root();if(!t)return!1;if(e===t)return this._root=null,this._numLeafs=0,!0;let r=e.parent,s=e.branchKey;for(;r;){var o;if(r.branches.delete(s),r===t)return r.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(r.branches.size>0)break;s=(o=r)===null||o===void 0?void 0:o.branchKey,r=r.parent}for(;r!==t;r=r.parent)if(r==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=bg()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw Dr(e+(this._name!=null?` - ${this._name}`:"")),new Ms}}var Sg={TreeCache:wg},Rg=Sg.TreeCache,ji=Object.freeze({__proto__:null,TreeCache:Rg});class Tg{constructor(e){var t;V(this,"_maxSize",void 0),V(this,"_size",void 0),V(this,"_head",void 0),V(this,"_tail",void 0),V(this,"_map",void 0),V(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(t=e.mapKey)!==null&&t!==void 0?t:r=>r}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const t=this._keyMapper(e),r=this._map.get(t);if(r)return this.set(e,r.value),r.value}set(e,t){const r=this._keyMapper(e);this._map.get(r)&&this.delete(e);const o=this.head(),i={key:e,right:o,left:null,value:t};o?o.left=i:this._tail=i,this._map.set(r,i),this._head=i,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const t=this._keyMapper(e);if(!this._size||!this._map.has(t))return;const r=re(this._map.get(t)),s=r.right,o=r.left;s&&(s.left=r.left),o&&(o.right=r.right),r===this.head()&&(this._head=s),r===this.tail()&&(this._tail=o),this._map.delete(t),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var Eg={LRUCache:Tg},kg=Eg.LRUCache,Ui=Object.freeze({__proto__:null,LRUCache:kg});const{LRUCache:Ag}=Ui,{TreeCache:$g}=ji;function Cg({name:n,maxSize:e,mapNodeValue:t=r=>r}){const r=new Ag({maxSize:e}),s=new $g({name:n,mapNodeValue:t,onHit:o=>{r.set(o,!0)},onSet:o=>{const i=r.tail();r.set(o,!0),i&&s.size()>e&&s.delete(i.key)}});return s}var Vs=Cg;function ke(n,e,t){if(typeof n=="string"&&!n.includes('"')&&!n.includes("\\"))return`"${n}"`;switch(typeof n){case"undefined":return"";case"boolean":return n?"true":"false";case"number":case"symbol":return String(n);case"string":return JSON.stringify(n);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw B("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${n.name})__`}if(n===null)return"null";if(typeof n!="object"){var r;return(r=JSON.stringify(n))!==null&&r!==void 0?r:""}if(ee(n))return"__PROMISE__";if(Array.isArray(n))return`[${n.map((s,o)=>ke(s,e,o.toString()))}]`;if(typeof n.toJSON=="function")return ke(n.toJSON(t),e,t);if(n instanceof Map){const s={};for(const[o,i]of n)s[typeof o=="string"?o:ke(o,e)]=i;return ke(s,e,t)}return n instanceof Set?ke(Array.from(n).sort((s,o)=>ke(s,e).localeCompare(ke(o,e))),e,t):Symbol!==void 0&&n[Symbol.iterator]!=null&&typeof n[Symbol.iterator]=="function"?ke(Array.from(n),e,t):`{${Object.keys(n).filter(s=>n[s]!==void 0).sort().map(s=>`${ke(s,e)}:${ke(n[s],e,s)}`).join(",")}}`}function Ng(n,e={allowFunctions:!1}){return ke(n,e)}var Wn=Ng;const{TreeCache:Lg}=ji,cn={equality:"reference",eviction:"keep-all",maxSize:1/0};function xg({equality:n=cn.equality,eviction:e=cn.eviction,maxSize:t=cn.maxSize}=cn,r){const s=Pg(n);return Og(e,t,s,r)}function Pg(n){switch(n){case"reference":return e=>e;case"value":return e=>Wn(e)}throw B(`Unrecognized equality policy ${n}`)}function Og(n,e,t,r){switch(n){case"keep-all":return new Lg({name:r,mapNodeValue:t});case"lru":return Vs({name:r,maxSize:re(e),mapNodeValue:t});case"most-recent":return Vs({name:r,maxSize:1,mapNodeValue:t})}throw B(`Unrecognized eviction policy ${n}`)}var Ig=xg;function jg(n){return()=>null}var Ug={startPerfBlock:jg};const{isLoadable:Dg,loadableWithError:ln,loadableWithPromise:Mg,loadableWithValue:cr}=Zt,{WrappedValue:Di}=Ii,{getNodeLoadable:un,peekNodeLoadable:Vg,setNodeValue:Bg}=We,{saveDepsToStore:Fg}=Xt,{DEFAULT_VALUE:zg,getConfigDeletionHandler:Wg,getNode:qg,registerNode:Bs}=_e,{isRecoilValue:Kg}=wt,{markRecoilValueModified:Fs}=Ne,{retainedByOptionWithDefault:Hg}=st,{recoilCallback:Gg}=Oi,{startPerfBlock:Jg}=Ug;class Mi{}const It=new Mi,jt=[],dn=new Map,Zg=(()=>{let n=0;return()=>n++})();function Vi(n){let e=null;const{key:t,get:r,cachePolicy_UNSTABLE:s}=n,o=n.set!=null?n.set:void 0,i=new Set,a=Ig(s??{equality:"reference",eviction:"keep-all"},t),c=Hg(n.retainedBy_UNSTABLE),l=new Map;let u=0;function d(){return!X("recoil_memory_managament_2020")||u>0}function g(p){return p.getState().knownSelectors.add(t),u++,()=>{u--}}function _(){return Wg(t)!==void 0&&!d()}function v(p,S,T,D,N){it(S,D,N),b(p,T)}function b(p,S){me(p,S)&&ue(p),C(S,!0)}function R(p,S){me(p,S)&&(re(J(p)).stateVersions.clear(),C(S,!1))}function C(p,S){const T=dn.get(p);if(T!=null){for(const D of T)Fs(D,re(e));S&&dn.delete(p)}}function w(p,S){let T=dn.get(S);T==null&&dn.set(S,T=new Set),T.add(p)}function m(p,S,T,D,N,K){return S.then(W=>{if(!d())throw ue(p),It;const x=cr(W);return v(p,T,N,x,D),W}).catch(W=>{if(!d())throw ue(p),It;if(ee(W))return L(p,W,T,D,N,K);const x=ln(W);throw v(p,T,N,x,D),W})}function L(p,S,T,D,N,K){return S.then(W=>{if(!d())throw ue(p),It;K.loadingDepKey!=null&&K.loadingDepPromise===S?T.atomValues.set(K.loadingDepKey,cr(W)):p.getState().knownSelectors.forEach(Z=>{T.atomValues.delete(Z)});const x=U(p,T);if(x&&x.state!=="loading"){if((me(p,N)||J(p)==null)&&b(p,N),x.state==="hasValue")return x.contents;throw x.contents}if(!me(p,N)){const Z=xe(p,T);if(Z!=null)return Z.loadingLoadable.contents}const[te,ie]=P(p,T,N);if(te.state!=="loading"&&v(p,T,N,te,ie),te.state==="hasError")throw te.contents;return te.contents}).catch(W=>{if(W instanceof Mi)throw It;if(!d())throw ue(p),It;const x=ln(W);throw v(p,T,N,x,D),W})}function F(p,S,T,D){var N,K,W,x;if(me(p,D)||S.version===((N=p.getState())===null||N===void 0||(K=N.currentTree)===null||K===void 0?void 0:K.version)||S.version===((W=p.getState())===null||W===void 0||(x=W.nextTree)===null||x===void 0?void 0:x.version)){var te,ie,Z;Fg(t,T,p,(te=(ie=p.getState())===null||ie===void 0||(Z=ie.nextTree)===null||Z===void 0?void 0:Z.version)!==null&&te!==void 0?te:p.getState().currentTree.version)}for(const oe of T)i.add(oe)}function P(p,S,T){const D=Jg(t);let N=!0,K=!0;const W=()=>{D(),K=!1};let x,te=!1,ie;const Z={loadingDepKey:null,loadingDepPromise:null},oe=new Map;function Re({key:be}){const ye=un(p,S,be);switch(oe.set(be,ye),N||(F(p,S,new Set(oe.keys()),T),R(p,T)),ye.state){case"hasValue":return ye.contents;case"hasError":throw ye.contents;case"loading":throw Z.loadingDepKey=be,Z.loadingDepPromise=ye.contents,ye.contents}throw B("Invalid Loadable state")}const He=be=>(...ye)=>{if(K)throw B("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return e==null&&Mt(!1),Gg(p,be,ye,{node:e})};try{x=r({get:Re,getCallback:He}),x=Kg(x)?Re(x):x,Dg(x)&&(x.state==="hasError"&&(te=!0),x=x.contents),ee(x)?x=m(p,x,S,oe,T,Z).finally(W):W(),x=x instanceof Di?x.value:x}catch(be){x=be,ee(x)?x=L(p,x,S,oe,T,Z).finally(W):(te=!0,W())}return te?ie=ln(x):ee(x)?ie=Mg(x):ie=cr(x),N=!1,Ke(p,T,oe),F(p,S,new Set(oe.keys()),T),[ie,oe]}function U(p,S){let T=S.atomValues.get(t);if(T!=null)return T;const D=new Set;try{T=a.get(K=>(typeof K!="string"&&Mt(!1),un(p,S,K).contents),{onNodeVisit:K=>{K.type==="branch"&&K.nodeKey!==t&&D.add(K.nodeKey)}})}catch(K){throw B(`Problem with cache lookup for selector "${t}": ${K.message}`)}if(T){var N;S.atomValues.set(t,T),F(p,S,D,(N=J(p))===null||N===void 0?void 0:N.executionID)}return T}function fe(p,S){const T=U(p,S);if(T!=null)return ue(p),T;const D=xe(p,S);if(D!=null){var N;return((N=D.loadingLoadable)===null||N===void 0?void 0:N.state)==="loading"&&w(p,D.executionID),D.loadingLoadable}const K=Zg(),[W,x]=P(p,S,K);return W.state==="loading"?(de(p,K,W,x,S),w(p,K)):(ue(p),it(S,W,x)),W}function xe(p,S){const T=ci([l.has(p)?[re(l.get(p))]:[],Ln(zr(l,([N])=>N!==p),([,N])=>N)]);function D(N){for(const[K,W]of N)if(!un(p,S,K).is(W))return!0;return!1}for(const N of T){if(N.stateVersions.get(S.version)||!D(N.depValuesDiscoveredSoFarDuringAsyncWork))return N.stateVersions.set(S.version,!0),N;N.stateVersions.set(S.version,!1)}}function J(p){return l.get(p)}function de(p,S,T,D,N){l.set(p,{depValuesDiscoveredSoFarDuringAsyncWork:D,executionID:S,loadingLoadable:T,stateVersions:new Map([[N.version,!0]])})}function Ke(p,S,T){if(me(p,S)){const D=J(p);D!=null&&(D.depValuesDiscoveredSoFarDuringAsyncWork=T)}}function ue(p){l.delete(p)}function me(p,S){var T;return S===((T=J(p))===null||T===void 0?void 0:T.executionID)}function ot(p){return Array.from(p.entries()).map(([S,T])=>[S,T.contents])}function it(p,S,T){p.atomValues.set(t,S);try{a.set(ot(T),S)}catch(D){throw B(`Problem with setting cache for selector "${t}": ${D.message}`)}}function Pe(p){if(jt.includes(t)){const S=`Recoil selector has circular dependencies: ${jt.slice(jt.indexOf(t)).join("  ")}`;return ln(B(S))}jt.push(t);try{return p()}finally{jt.pop()}}function at(p,S){const T=S.atomValues.get(t);return T??a.get(D=>{var N;return typeof D!="string"&&Mt(!1),(N=Vg(p,S,D))===null||N===void 0?void 0:N.contents})}function ct(p,S){return Pe(()=>fe(p,S))}function H(p){p.atomValues.delete(t)}function G(p,S){e==null&&Mt(!1);for(const D of i){var T;const N=qg(D);(T=N.clearCache)===null||T===void 0||T.call(N,p,S)}i.clear(),H(S),a.clear(),Fs(p,e)}return o!=null?e=Bs({key:t,nodeType:"selector",peek:at,get:ct,set:(S,T,D)=>{let N=!1;const K=new Map;function W({key:Z}){if(N)throw B("Recoil: Async selector sets are not currently supported.");const oe=un(S,T,Z);if(oe.state==="hasValue")return oe.contents;if(oe.state==="loading"){const Re=`Getting value of asynchronous atom or selector "${Z}" in a pending state while setting selector "${t}" is not yet supported.`;throw B(Re)}else throw oe.contents}function x(Z,oe){if(N)throw B("Recoil: Async selector sets are not currently supported.");const Re=typeof oe=="function"?oe(W(Z)):oe;Bg(S,T,Z.key,Re).forEach((be,ye)=>K.set(ye,be))}function te(Z){x(Z,zg)}const ie=o({set:x,get:W,reset:te},D);if(ie!==void 0)throw ee(ie)?B("Recoil: Async selector sets are not currently supported."):B("Recoil: selector set should be a void function.");return N=!0,K},init:g,invalidate:H,clearCache:G,shouldDeleteConfigOnRelease:_,dangerouslyAllowMutability:n.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:c}):e=Bs({key:t,nodeType:"selector",peek:at,get:ct,init:g,invalidate:H,clearCache:G,shouldDeleteConfigOnRelease:_,dangerouslyAllowMutability:n.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:c})}Vi.value=n=>new Di(n);var Tt=Vi;const{isLoadable:Yg,loadableWithError:lr,loadableWithPromise:ur,loadableWithValue:gt}=Zt,{WrappedValue:Bi}=Ii,{peekNodeInfo:Xg}=We,{DEFAULT_VALUE:Qe,DefaultValue:Be,getConfigDeletionHandler:Fi,registerNode:Qg,setConfigDeletionHandler:ev}=_e,{isRecoilValue:tv}=wt,{getRecoilValueAsLoadable:nv,markRecoilValueModified:rv,setRecoilValue:zs,setRecoilValueLoadable:sv}=Ne,{retainedByOptionWithDefault:ov}=st,Ut=n=>n instanceof Bi?n.value:n;function iv(n){const{key:e,persistence_UNSTABLE:t}=n,r=ov(n.retainedBy_UNSTABLE);let s=0;function o(w){return ur(w.then(m=>(i=gt(m),m)).catch(m=>{throw i=lr(m),m}))}let i=ee(n.default)?o(n.default):Yg(n.default)?n.default.state==="loading"?o(n.default.contents):n.default:gt(Ut(n.default));i.contents;let a;const c=new Map;function l(w){return w}function u(w,m){const L=m.then(F=>{var P,U;return((U=((P=w.getState().nextTree)!==null&&P!==void 0?P:w.getState().currentTree).atomValues.get(e))===null||U===void 0?void 0:U.contents)===L&&zs(w,C,F),F}).catch(F=>{var P,U;throw((U=((P=w.getState().nextTree)!==null&&P!==void 0?P:w.getState().currentTree).atomValues.get(e))===null||U===void 0?void 0:U.contents)===L&&sv(w,C,lr(F)),F});return L}function d(w,m,L){var F;s++;const P=()=>{var J;s--,(J=c.get(w))===null||J===void 0||J.forEach(de=>de()),c.delete(w)};if(w.getState().knownAtoms.add(e),i.state==="loading"){const J=()=>{var de;((de=w.getState().nextTree)!==null&&de!==void 0?de:w.getState().currentTree).atomValues.has(e)||rv(w,C)};i.contents.finally(J)}const U=(F=n.effects)!==null&&F!==void 0?F:n.effects_UNSTABLE;if(U!=null){let me=function(H){if(de&&H.key===e){const G=J;return G instanceof Be?g(w,m):ee(G)?ur(G.then(p=>p instanceof Be?i.toPromise():p)):gt(G)}return nv(w,H)},ot=function(H){return me(H).toPromise()},it=function(H){var G;const p=Xg(w,(G=w.getState().nextTree)!==null&&G!==void 0?G:w.getState().currentTree,H.key);return de&&H.key===e&&!(J instanceof Be)?{...p,isSet:!0,loadable:me(H)}:p},J=Qe,de=!0,Ke=!1,ue=null;const Pe=H=>G=>{if(de){const p=me(C),S=p.state==="hasValue"?p.contents:Qe;J=typeof G=="function"?G(S):G,ee(J)&&(J=J.then(T=>(ue={effect:H,value:T},T)))}else{if(ee(G))throw B("Setting atoms to async values is not implemented.");typeof G!="function"&&(ue={effect:H,value:Ut(G)}),zs(w,C,typeof G=="function"?p=>{const S=Ut(G(p));return ue={effect:H,value:S},S}:Ut(G))}},at=H=>()=>Pe(H)(Qe),ct=H=>G=>{var p;const{release:S}=w.subscribeToTransactions(T=>{var D;let{currentTree:N,previousTree:K}=T.getState();K||(K=N);const W=(D=N.atomValues.get(e))!==null&&D!==void 0?D:i;if(W.state==="hasValue"){var x,te,ie,Z;const oe=W.contents,Re=(x=K.atomValues.get(e))!==null&&x!==void 0?x:i,He=Re.state==="hasValue"?Re.contents:Qe;((te=ue)===null||te===void 0?void 0:te.effect)!==H||((ie=ue)===null||ie===void 0?void 0:ie.value)!==oe?G(oe,He,!N.atomValues.has(e)):((Z=ue)===null||Z===void 0?void 0:Z.effect)===H&&(ue=null)}},e);c.set(w,[...(p=c.get(w))!==null&&p!==void 0?p:[],S])};for(const H of U)try{const G=H({node:C,storeID:w.storeID,parentStoreID_UNSTABLE:w.parentStoreID,trigger:L,setSelf:Pe(H),resetSelf:at(H),onSet:ct(H),getPromise:ot,getLoadable:me,getInfo_UNSTABLE:it});if(G!=null){var fe;c.set(w,[...(fe=c.get(w))!==null&&fe!==void 0?fe:[],G])}}catch(G){J=G,Ke=!0}if(de=!1,!(J instanceof Be)){var xe;const H=Ke?lr(J):ee(J)?ur(u(w,J)):gt(Ut(J));H.contents,m.atomValues.set(e,H),(xe=w.getState().nextTree)===null||xe===void 0||xe.atomValues.set(e,H)}}return P}function g(w,m){var L,F;return(L=(F=m.atomValues.get(e))!==null&&F!==void 0?F:a)!==null&&L!==void 0?L:i}function _(w,m){if(m.atomValues.has(e))return re(m.atomValues.get(e));if(m.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(t==null)return i;const L=m.nonvalidatedAtoms.get(e),F=t.validator(L,Qe);return a=F instanceof Be?i:gt(F),a}else return i}function v(){a=void 0}function b(w,m,L){if(m.atomValues.has(e)){const F=re(m.atomValues.get(e));if(F.state==="hasValue"&&L===F.contents)return new Map}else if(!m.nonvalidatedAtoms.has(e)&&L instanceof Be)return new Map;return a=void 0,new Map().set(e,gt(L))}function R(){return Fi(e)!==void 0&&s<=0}const C=Qg({key:e,nodeType:"atom",peek:g,get:_,set:b,init:d,invalidate:v,shouldDeleteConfigOnRelease:R,dangerouslyAllowMutability:n.dangerouslyAllowMutability,persistence_UNSTABLE:n.persistence_UNSTABLE?{type:n.persistence_UNSTABLE.type,backButton:n.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return C}function Qr(n){const{...e}=n,t="default"in n?n.default:new Promise(()=>{});return tv(t)?av({...e,default:t}):iv({...e,default:t})}function av(n){const e=Qr({...n,default:Qe,persistence_UNSTABLE:n.persistence_UNSTABLE===void 0?void 0:{...n.persistence_UNSTABLE,validator:r=>r instanceof Be?r:re(n.persistence_UNSTABLE).validator(r,Qe)},effects:n.effects,effects_UNSTABLE:n.effects_UNSTABLE}),t=Tt({key:`${n.key}__withFallback`,get:({get:r})=>{const s=r(e);return s instanceof Be?n.default:s},set:({set:r},s)=>r(e,s),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:n.dangerouslyAllowMutability});return ev(t.key,Fi(n.key)),t}Qr.value=n=>new Bi(n);var zi=Qr;class cv{constructor(e){var t;V(this,"_map",void 0),V(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(t=e==null?void 0:e.mapKey)!==null&&t!==void 0?t:r=>r}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,t){this._map.set(this._keyMapper(e),t)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}var lv={MapCache:cv},uv=lv.MapCache,dv=Object.freeze({__proto__:null,MapCache:uv});const{LRUCache:Ws}=Ui,{MapCache:hv}=dv,hn={equality:"reference",eviction:"none",maxSize:1/0};function fv({equality:n=hn.equality,eviction:e=hn.eviction,maxSize:t=hn.maxSize}=hn){const r=pv(n);return gv(e,t,r)}function pv(n){switch(n){case"reference":return e=>e;case"value":return e=>Wn(e)}throw B(`Unrecognized equality policy ${n}`)}function gv(n,e,t){switch(n){case"keep-all":return new hv({mapKey:t});case"lru":return new Ws({mapKey:t,maxSize:re(e)});case"most-recent":return new Ws({mapKey:t,maxSize:1})}throw B(`Unrecognized eviction policy ${n}`)}var Wi=fv;const{setConfigDeletionHandler:vv}=_e;function _v(n){var e,t;const r=Wi({equality:(e=(t=n.cachePolicyForParams_UNSTABLE)===null||t===void 0?void 0:t.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return s=>{var o,i;const a=r.get(s);if(a!=null)return a;const{cachePolicyForParams_UNSTABLE:c,...l}=n,u="default"in n?n.default:new Promise(()=>{}),d=zi({...l,key:`${n.key}__${(o=Wn(s))!==null&&o!==void 0?o:"void"}`,default:typeof u=="function"?u(s):u,retainedBy_UNSTABLE:typeof n.retainedBy_UNSTABLE=="function"?n.retainedBy_UNSTABLE(s):n.retainedBy_UNSTABLE,effects:typeof n.effects=="function"?n.effects(s):typeof n.effects_UNSTABLE=="function"?n.effects_UNSTABLE(s):(i=n.effects)!==null&&i!==void 0?i:n.effects_UNSTABLE});return r.set(s,d),vv(d.key,()=>{r.delete(s)}),d}}var mv=_v;const{setConfigDeletionHandler:yv}=_e;let bv=0;function wv(n){var e,t;const r=Wi({equality:(e=(t=n.cachePolicyForParams_UNSTABLE)===null||t===void 0?void 0:t.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return s=>{var o;let i;try{i=r.get(s)}catch(g){throw B(`Problem with cache lookup for selector ${n.key}: ${g.message}`)}if(i!=null)return i;const a=`${n.key}__selectorFamily/${(o=Wn(s,{allowFunctions:!0}))!==null&&o!==void 0?o:"void"}/${bv++}`,c=g=>n.get(s)(g),l=n.cachePolicy_UNSTABLE,u=typeof n.retainedBy_UNSTABLE=="function"?n.retainedBy_UNSTABLE(s):n.retainedBy_UNSTABLE;let d;if(n.set!=null){const g=n.set;d=Tt({key:a,get:c,set:(v,b)=>g(s)(v,b),cachePolicy_UNSTABLE:l,dangerouslyAllowMutability:n.dangerouslyAllowMutability,retainedBy_UNSTABLE:u})}else d=Tt({key:a,get:c,cachePolicy_UNSTABLE:l,dangerouslyAllowMutability:n.dangerouslyAllowMutability,retainedBy_UNSTABLE:u});return r.set(s,d),yv(d.key,()=>{r.delete(s)}),d}}var qe=wv;const Sv=qe({key:"__constant",get:n=>()=>n,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function Rv(n){return Sv(n)}var Tv=Rv;const Ev=qe({key:"__error",get:n=>()=>{throw B(n)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function kv(n){return Ev(n)}var Av=kv;function $v(n){return n}var Cv=$v;const{loadableWithError:qi,loadableWithPromise:Ki,loadableWithValue:Hi}=Zt;function qn(n,e){const t=Array(e.length).fill(void 0),r=Array(e.length).fill(void 0);for(const[s,o]of e.entries())try{t[s]=n(o)}catch(i){r[s]=i}return[t,r]}function Nv(n){return n!=null&&!ee(n)}function Kn(n){return Array.isArray(n)?n:Object.getOwnPropertyNames(n).map(e=>n[e])}function Lr(n,e){return Array.isArray(n)?e:Object.getOwnPropertyNames(n).reduce((t,r,s)=>({...t,[r]:e[s]}),{})}function mt(n,e,t){const r=t.map((s,o)=>s==null?Hi(e[o]):ee(s)?Ki(s):qi(s));return Lr(n,r)}function Lv(n,e){return e.map((t,r)=>t===void 0?n[r]:t)}const xv=qe({key:"__waitForNone",get:n=>({get:e})=>{const t=Kn(n),[r,s]=qn(e,t);return mt(n,r,s)},dangerouslyAllowMutability:!0}),Pv=qe({key:"__waitForAny",get:n=>({get:e})=>{const t=Kn(n),[r,s]=qn(e,t);return s.some(o=>!ee(o))?mt(n,r,s):new Promise(o=>{for(const[i,a]of s.entries())ee(a)&&a.then(c=>{r[i]=c,s[i]=void 0,o(mt(n,r,s))}).catch(c=>{s[i]=c,o(mt(n,r,s))})})},dangerouslyAllowMutability:!0}),Ov=qe({key:"__waitForAll",get:n=>({get:e})=>{const t=Kn(n),[r,s]=qn(e,t);if(s.every(i=>i==null))return Lr(n,r);const o=s.find(Nv);if(o!=null)throw o;return Promise.all(s).then(i=>Lr(n,Lv(r,i)))},dangerouslyAllowMutability:!0}),Iv=qe({key:"__waitForAllSettled",get:n=>({get:e})=>{const t=Kn(n),[r,s]=qn(e,t);return s.every(o=>!ee(o))?mt(n,r,s):Promise.all(s.map((o,i)=>ee(o)?o.then(a=>{r[i]=a,s[i]=void 0}).catch(a=>{r[i]=void 0,s[i]=a}):null)).then(()=>mt(n,r,s))},dangerouslyAllowMutability:!0}),jv=qe({key:"__noWait",get:n=>({get:e})=>{try{return Tt.value(Hi(e(n)))}catch(t){return Tt.value(ee(t)?Ki(t):qi(t))}},dangerouslyAllowMutability:!0});var Uv={waitForNone:xv,waitForAny:Pv,waitForAll:Ov,waitForAllSettled:Iv,noWait:jv};const{RecoilLoadable:Dv}=Zt,{DefaultValue:Mv}=_e,{RecoilRoot:Vv,useRecoilStoreID:Bv}=De,{isRecoilValue:Fv}=wt,{retentionZone:zv}=Pn,{freshSnapshot:Wv}=Mn,{useRecoilState:qv,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Kv,useRecoilStateLoadable:Hv,useRecoilValue:Gv,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Jv,useRecoilValueLoadable:Zv,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Yv,useResetRecoilState:Xv,useSetRecoilState:Qv}=lp,{useGotoRecoilSnapshot:e_,useRecoilSnapshot:t_,useRecoilTransactionObserver:n_}=Ni,{useRecoilCallback:r_}=Oi,{noWait:s_,waitForAll:o_,waitForAllSettled:i_,waitForAny:a_,waitForNone:c_}=Uv;var l_={DefaultValue:Mv,isRecoilValue:Fv,RecoilLoadable:Dv,RecoilEnv:At,RecoilRoot:Vv,useRecoilStoreID:Bv,useRecoilBridgeAcrossReactRoots_UNSTABLE:jp,atom:zi,selector:Tt,atomFamily:mv,selectorFamily:qe,constSelector:Tv,errorSelector:Av,readOnlySelector:Cv,noWait:s_,waitForNone:c_,waitForAny:a_,waitForAll:o_,waitForAllSettled:i_,useRecoilValue:Gv,useRecoilValueLoadable:Zv,useRecoilState:qv,useRecoilStateLoadable:Hv,useSetRecoilState:Qv,useResetRecoilState:Xv,useGetRecoilValueInfo_UNSTABLE:Np,useRecoilRefresher_UNSTABLE:dg,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Yv,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Jv,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Kv,useRecoilCallback:r_,useRecoilTransaction_UNSTABLE:vg,useGotoRecoilSnapshot:e_,useRecoilSnapshot:t_,useRecoilTransactionObserver_UNSTABLE:n_,snapshot_UNSTABLE:Wv,useRetain:Gr,retentionZone:zv},u_=l_.RecoilRoot;const d_={}.VITE_APP_NAME;function h_({children:n}){return A.jsx(u_,{children:A.jsx(gu,{children:A.jsx(Xa,{defaultTheme:"dark",storageKey:`${d_}-ui-theme`,children:n})})})}const f_=()=>{const{isAuthenticated:n,isInitialized:e}=Co();return e?n?A.jsx(ca,{}):A.jsx(la,{to:"/auth"}):A.jsx("div",{className:"flex items-center justify-center min-h-screen",children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),A.jsx("p",{className:"mt-2 text-muted-foreground",children:"Loading..."})]})})},p_=Y.lazy(()=>je(()=>import("./Home-18c374c3.js"),["assets/Home-18c374c3.js","assets/wrapper-46e1aa09.js","assets/react-31849db6.js","assets/token-button-190cb240.js","assets/arrow-right-b8d4104a.js","assets/ui-3209bd4e.js"])),g_=Y.lazy(()=>je(()=>import("./Auth-4101e8f2.js"),["assets/Auth-4101e8f2.js","assets/react-31849db6.js","assets/wrapper-46e1aa09.js","assets/token-button-190cb240.js","assets/ui-3209bd4e.js"])),v_=Y.lazy(()=>je(()=>import("./design-tokens-demo-df9a1012.js"),["assets/design-tokens-demo-df9a1012.js","assets/wrapper-46e1aa09.js","assets/react-31849db6.js","assets/ui-3209bd4e.js"])),__=Y.lazy(()=>je(()=>import("./button-demo-03e2ff07.js"),["assets/button-demo-03e2ff07.js","assets/wrapper-46e1aa09.js","assets/react-31849db6.js","assets/token-button-190cb240.js","assets/arrow-right-b8d4104a.js","assets/ui-3209bd4e.js"]));function m_(){return A.jsx(h_,{children:A.jsxs(ua,{basename:"/project-noah/",children:[A.jsx(_u,{}),A.jsx(Y.Suspense,{fallback:A.jsx("div",{className:"p-4",children:"Loading..."}),children:A.jsxs(da,{children:[A.jsxs(Lt,{element:A.jsx(f_,{}),children:[A.jsx(Lt,{path:"/",element:A.jsx(p_,{})}),A.jsx(Lt,{path:"/design-tokens",element:A.jsx(v_,{})}),A.jsx(Lt,{path:"/button-demo",element:A.jsx(__,{})})]}),A.jsx(Lt,{path:"/auth",element:A.jsx(g_,{})})]})})]})})}dr.createRoot(document.getElementById("root")).render(A.jsx(m_,{}));export{xa as C,ja as P,Ue as a,Ce as c,A as j,Co as u};
